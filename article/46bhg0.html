<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/loadscripts.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/jump-1.2.js"></script>
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/resources/resources.js"></script>
    <script src="/myjs/scriptlist.js"></script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg">ğŸš€</button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <span id="slogan">
            <i id="wolf-logo" style="font-style: normal;" class="mr-4">ğŸŒ‘</i>I'M BACK
        </span>
        <div id="showmore"> &gt; About Me & This Blog</div>
        <div id="showhacknical"> &gt; My Github Analysis</div>
        <div id="toarticles"> &gt; My Tech Articles</div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="series" class="unselectable">
        <span>ç³»</span>
        <span>åˆ—</span>
        <span>æ–‡</span>
        <span>ç« </span>
    </div>
    <div id="seriesbox" class="unselectable">

    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistic</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Site running days:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Total article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Char count:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Category count:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tag count:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search">
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-light" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-light" type="button">cates</button>
                <button id="tags" class="btn btn-light" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-light" type="button" title="search">sch</button>
            </div>
        </div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container markdown-toc"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        
          <h3>
            <a name="_root-Introduction" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Introduction
          </h3><p>Javaä¸­çš„<code>String</code>å…¶å®æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥æ·±å…¥çš„ï¼Œæ¯”å¦‚æœ€å¿«æ‹¼æ¥æ•ˆç‡ï¼Œæ¯”å¦‚å¸¸é‡æ± ï¼Œæ¯”å¦‚è€ç”Ÿå¸¸è°ˆçš„<code>==</code>é—®é¢˜</p>
<p>ç ”ç©¶å®ƒä»¬çš„æ—¶å€™æˆ‘ä»¬å§‹ç»ˆè¦è®°ä½ï¼Œ<code>String</code>æ˜¯ä¸å¯å˜çš„<strong>ï¼ˆimmutableï¼‰</strong></p>
<p>è¿˜æœ‰æ¯”å¦‚å®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ª<code>char[]</code>æ•°ç»„è¿™äº›äº‹å®å°±ç®€å•å¸¦è¿‡äº†</p>
<p>æˆ‘ä»¬éœ€è¦æ·±å…¥çš„æ˜¯<code>String</code>çš„å†…å­˜é—®é¢˜ï¼Œæ—¢ç„¶å®ƒæ˜¯ä¸€æˆä¸å˜çš„ï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆJVMæ˜¯å¦‚ä½•å‡å°‘å†…å­˜çš„å¼€é”€çš„ï¼Ÿä»¥åŠå®ƒå¼•ç”³å‡ºçš„ä¸€ç³»åˆ—å†…å­˜é—®é¢˜</p>
<p>è€Œæˆ‘æƒ³å†™è¿™ç¯‡æ–‡ç« çš„å¼•å­ï¼Œåˆ™æ˜¯<a href="https://github.com/hollischuang">Holliså‰è¾ˆ</a>çš„ä¸€ç¯‡ï¼š<a href="https://mp.weixin.qq.com/s/Zs8en3T8TxCMbxGWHkDwBw?comefrom=http://blogread.cn/news/">ä¸ºä»€ä¹ˆé˜¿é‡Œå·´å·´ä¸å»ºè®®åœ¨forå¾ªç¯ä¸­ä½¿ç”¨&quot;+&quot;è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</a></p>

          <h3>
            <a name="_root-Constant Pool &amp; Runtime Constant Pool" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Constant Pool &amp; Runtime Constant Pool
          </h3><p>å…³äºå¸¸é‡æ± ï¼Œå®ƒç”¨äºå­˜æ”¾Javaç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œäºæ˜¯æ¯ä¸ªClassæ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªConstant Poolï¼Œå…·ä½“çš„ä½ å¯ä»¥é€šè¿‡<code>javap -v ClassName</code>ä¸€ä¸ªç±»å»çœ‹åˆ°ï¼›</p>
<p>è€Œåœ¨JVMè£…è½½classæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šè¯»å–Constant Poolé‡Œçš„å†…å®¹åˆ°Runtime Constant Poolï¼Œè€ŒRuntime Constant Poolä¼šåœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™åŠ¨æ€äº§ç”Ÿæ–°çš„å¸¸é‡ï¼›</p>

          <h3>
            <a name="_root-Literal" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Literal
          </h3><p>æˆ‘ä»¬çŸ¥é“Stringæœ‰ä¸¤ç§åˆ›å»ºçš„æ–¹å¼ï¼š</p>
<pre><code class="language-java">String a = &quot;hello&quot;;        // literal
String b = new String(&quot;hello&quot;);        // new an object</code></pre>
<p>æˆ‘ä»¬å½“ç„¶ä¹ŸçŸ¥é“ï¼Œaå’Œbæ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œå› ä¸ºaæ˜¯ç›´æ¥å¼•ç”¨String Poolçš„<strong>å­—é¢é‡</strong>ï¼Œè€Œbå¼•ç”¨çš„æ˜¯ä¸€ä¸ªStringå¯¹è±¡ï¼Œè™½ç„¶è¿™ä¸ªStringå¯¹è±¡ä¸­çš„å­—é¢é‡å®é™…ä¸Šä¹Ÿæ˜¯å¼•ç”¨åˆ°String Pool</p>
<p>
        <div id="_showpic_a29878ec" class="showpicbtn">æ­£åœ¨æ˜¾ç¤ºå›¾ç‰‡ >></div>
        <img id="_pic_a29878ec" href=https://image.youyinnn.top/20190302153504.png class="hidepic" ></img>
        <script>
            let imgselfa29878ec = document.getElementById('_pic_a29878ec')
            let isInViewPortOfTwoa29878ec = function () {
                const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                const top = imgselfa29878ec.getBoundingClientRect() && imgselfa29878ec.getBoundingClientRect().top
                if (top  <= viewPortHeight + 300) {
                    document.getElementById('_pic_a29878ec').src = document.getElementById('_pic_a29878ec').getAttribute('href')
                    document.getElementById('_pic_a29878ec').classList = ['showpic']
                    document.getElementById('_showpic_a29878ec').style.display = 'none'
                    window.removeEventListener('scroll', isInViewPortOfTwoa29878ec)
                    isInViewPortOfTwoa29878ec = null
                }
            }
            isInViewPortOfTwoa29878ec ()
            window.addEventListener('scroll', isInViewPortOfTwoa29878ec)
        </script>
    </p>
<p>å›¾å¼•è‡ª<a href="https://mp.weixin.qq.com/s?__biz=MzI3NzE0NjcwMg==&amp;mid=2650121551&amp;idx=1&amp;sn=b14691e0daeca8d1283fc8a860732405&amp;chksm=f36bb86ec41c3178bb5f17ae733ffa73a7249e39fcc473f63db928c909466397b352b493c0a3&amp;scene=21#wechat_redirect">æˆ‘ç»ˆäºææ¸…æ¥šäº†å’ŒStringæœ‰å…³çš„é‚£ç‚¹äº‹å„¿ã€‚</a></p>
<blockquote>
<p>åœ¨ä¸åŒç‰ˆæœ¬çš„JDKä¸­ï¼ŒJavaå †å’Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¹‹é—´çš„å…³ç³»ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿è¡¨è¿°ï¼Œå°±ç”»æˆä¸¤ä¸ªç‹¬ç«‹çš„ç‰©ç†åŒºåŸŸäº†ã€‚å…·ä½“æƒ…å†µè¯·å‚è€ƒJavaè™šæ‹Ÿæœºè§„èŒƒã€‚</p>
</blockquote>

          <h3>
            <a name="_root-String Pool" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            String Pool
          </h3><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä¹‹å‰ç¡®å®çŸ¥é“æœ‰String Poolè¿™ç©æ„ï¼Œé‚£ä¹ˆå®ƒåˆ°åº•åœ¨å“ªé‡Œï¼Ÿå †è¿˜æ˜¯æ ˆï¼ŸStackOverFlowä¸Šé¢æœ‰ä¸€æ®µå¾ˆæœ‰æ„æ€çš„é—®ç­”ï¼š<a href="https://stackoverflow.com/questions/4918399/where-does-javas-string-constant-pool-live-the-heap-or-the-stack">where does javas string constant pool live? the heap or the stack?</a></p>
<blockquote>
<p>The answer is technically neither. <strong>According to the Java Virtual Machine Specification</strong>, the area for storing string literals is in the <a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1">runtime constant pool</a>. </p>
<p><strong>The runtime constant pool</strong> memory area is allocated on a per-class or per-interface basis, so it&#39;s not tied to any object instances at all. </p>
<p><strong>The runtime constant pool</strong> is a subset of the <em>method area</em> which <strong>&quot;stores per-class structures such as the runtime constant pool, field and method data, and the code for methods and constructors, including the special methods used in class and instance initialization and interface type initialization&quot;</strong>. </p>
<p>The VM spec says that although the <em>method area</em> is <strong>logically part of the heap</strong>, it doesn&#39;t dictate that memory allocated in the method area be subject to garbage collection or other behaviors that would be associated with normal data structure allocated to the heap.</p>
</blockquote>
<p>String Poolæ˜¯RT Constant Poolçš„ä¸€éƒ¨åˆ†ï¼Œè€ŒRT Constant Poolæ˜¯<strong>æ–¹æ³•åŒº</strong>çš„ä¸€éƒ¨åˆ†ï¼Œè™½ç„¶æ–¹æ³•åŒºä¹Ÿæ˜¯Heapçš„ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒçš„è¡Œä¸ºå’ŒHeapä¸»åŒºåŸŸä¸åŒï¼›</p>
<p>ä¹Ÿæœ‰äººè¯´ï¼š</p>
<blockquote>
<p>As explained by <a href="https://stackoverflow.com/a/4918466/829571">previous answer</a>, the exact location of the string pool is not specified and can vary from one JVM implementation to another.</p>
<p>It is interesting to note that until Java 7, the pool was in the permgen space of the heap on hotspot JVM but <a href="http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#jdk7changes">it has been moved to the main part of the heap since Java 7</a>:</p>
<blockquote>
<p><strong>Area</strong>: HotSpot<br><strong>Synopsis</strong>: In JDK 7, interned strings are no longer allocated in the permanent generation of the Java heap, but <strong>are instead allocated in the main part of the Java heap</strong> (known as the young and old generations), along with the other objects created by the application. This change will result in more data residing in the main Java heap, and less data in the permanent generation, and thus may require heap sizes to be adjusted. Most applications will see only relatively small differences in heap usage due to this change, but larger applications that load many classes or make heavy use of the String.intern() method will see more significant differences. RFE: 6962931</p>
</blockquote>
<p>And in Java 8 Hotspot, Permanent Generation has been completely removed.</p>
</blockquote>
<p>ä¸¥æ ¼æ¥è¯´ï¼ŒString Poolçš„ä½ç½®æ ¹æ®ä¸åŒçš„JVMä»¥åŠä¸åŒçš„JDKç‰ˆæœ¬è€Œå˜åŒ–ï¼Œè€Œåœ¨HotSpotä¸­ï¼Œ7ä¹‹å‰çš„StringPoolç¡®å®æ˜¯åœ¨æ°¸ä¹…ä»£ï¼Œä½†æ˜¯7ä¹‹åå°±å°†å®ƒä»æ°¸ä¹…ä»£ç§»é™¤æ‰äº†ï¼Œè¢«é›†ä¸­çš„Stringå®é™…ä¸Šåœ¨å †çš„ä¸»è¦éƒ¨åˆ†åˆ†é…ï¼›</p>
<p>æˆ‘è®¤ä¸ºè¿™æ ·åšçš„ç›®çš„æ˜¯è®©GCorä¹Ÿèƒ½å¤„ç†å†—ä½™çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå¹¶ä¸”é¿å…å› ä¸ºå­—ç¬¦ä¸²å¸¸é‡çˆ†æ»¡è€Œå¼•å‘çš„PermGen Spaceçš„OOMï¼›</p>
<p>å†æä¸€å¥ï¼Œåœ¨Java 8 HotSpotä¸­ï¼Œæ°¸ä¹…ä»£è¢«å®Œå…¨ç§»é™¤æ‰äº†ï¼Œè¯´ç§»é™¤ä¹Ÿä¸å®Œå…¨å‡†ç¡®ï¼Œä¸‹é¢æˆ‘ä»¬è¯¦ç»†è¯´è¿™ä¸ªäº‹</p>

          <h3>
            <a name="_root-PermGen ?" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            PermGen ?
          </h3><p>å—¯å“¼ï¼Œé—®é¢˜åˆæ¥äº†ï¼Œä¹‹å‰äº†è§£åˆ°ï¼Œæ–¹æ³•åŒºæ˜¯æ°¸ä¹…ä»£çš„æ‰€åœ¨åœ°ï¼Œé‚£ä¹ˆJava 8 HotSpotä¸­ç§»é™¤æ‰äº†æ°¸ä¹…ä»£ç„¶åå½±å“åˆ°äº†ä»€ä¹ˆï¼Ÿä¹‹å‰æ°¸ä¹…ä»£å­˜åœ¨çš„æ„ä¹‰åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>PermGen is an abbreviation for Permanent Generation and itâ€™s a special heap space which is separate from the main Java heap where JVM keeps track of metadata of the classes which have been loaded.</p>
</blockquote>
<p>å¹¶ä¸”æ‰¾åˆ°å¦‚ä¸‹å‚è€ƒï¼š</p>
<ul>
<li><a href="https://dzone.com/articles/permgen-and-metaspace">PermGen And Metaspace</a></li>
<li><a href="https://blogs.oracle.com/jonthecollector/presenting-the-permanent-generation">Presenting The Permanent Genaration</a></li>
</ul>

          <h4>
            <a name="_root-In Java 7" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            In Java 7
          </h4><p>æ°¸ä¹…ä»£æ˜¯ä¹‹å‰JVMç”¨æ¥ä¿ç•™ç”¨äºç±»åŠ è½½çš„å…ƒæ•°æ®çš„åœ°æ–¹ï¼Œå¹¶ä¸”PermGen Spaceæ˜¯æœ‰é»˜è®¤çš„æœ€å¤§ç©ºé—´é™åˆ¶çš„ï¼Œæ‰€ä»¥åœ¨7ä¹‹å‰ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± è¿˜åœ¨PermGen Spaceçš„æ—¶å€™ï¼Œä¸‡ä¸€å­—ç¬¦ä¸²çˆ†äº†ï¼Œå°±ä¼šå¼•å‘OOMï¼›äºæ˜¯7å°±å°†String Poolç§»åˆ°main part of heapï¼›</p>
<p>å½“æˆ‘ä»¬éœ€è¦è°ƒæ•´è¿™ä¸€ç‰‡çš„å¤§å°çš„æ—¶å€™ï¼ŒJVMä¼šå°†å®ƒå’ŒHeapä¸»partçš„è°ƒæ•´å¤§å°æ“ä½œä¸€èµ·è¿›è¡Œï¼Œé€šå¸¸ä¼šå¼•å‘ä¸€æ¬¡<strong>Full GC</strong>ï¼Œè¿™æ ·çš„æ“ä½œéå¸¸æ˜‚è´µï¼Œç‰¹åˆ«æ˜¯å¦‚æœç¨‹åºè£…è½½ç±»ä¿¡æ¯è¿‡å¤šçš„æ—¶å€™ï¼ŒJVMä¼šè€ƒè™‘å¢å¤§PermGen Spaceï¼Œä»è€Œå¼•å‘<strong>Full GC</strong>ï¼Œäºæ˜¯æˆ‘ä»¬å¯åŠ¨ç¨‹åºçš„æ—¶å€™ä¹Ÿä¼šå˜å¾—å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ ä¸Šå¯åŠ¨å‚æ•°ï¼Œè°ƒæ•´PermGençš„é»˜è®¤åˆå§‹åŒ–å¤§å°å’Œæœ€å¤§å¯ç”¨ç©ºé—´ï¼š</p>
<p><code>-XX:PermSize=N</code> -  sets the initial (and minimum size) of the Permanent Generation space.</p>
<p><code>-XX:MaxPermSize=N</code>  -  sets the maximum size of the Permanent Generation space.</p>

          <h4>
            <a name="_root-What&#39;s More ?" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            What&#39;s More ?
          </h4><p>Javaä¸­æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„ç¤ºä¾‹ï¼ŒJVMç®¡ç†è¿™äº›å¯¹è±¡å¹¶å°†å®ƒä»¬å­˜æ”¾åœ¨Heapä¸­ï¼›</p>
<p>Javaä¸­æ¯ä¸€ä¸ªç±»ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªClasså¯¹è±¡å»å¯¹åº”çš„ï¼Œäºæ˜¯ç»è¿‡å‰é¢çš„é“ºå«æˆ‘ä»¬å¯ä»¥å½’æ€»ä¸€ä¸‹ï¼ŒJavaç±»å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„Classå¯¹è±¡ï¼Œæ˜¯å­˜æ”¾åœ¨PermGençš„ï¼›</p>
<p>äºæ˜¯ä»–ä»¬çš„å…³ç³»å¦‚å›¾ï¼š</p>
<p>
        <div id="_showpic_b9872d5" class="showpicbtn">æ­£åœ¨æ˜¾ç¤ºå›¾ç‰‡ >></div>
        <img id="_pic_b9872d5" href=https://image.youyinnn.top/20190302174113.png class="hidepic" ></img>
        <script>
            let imgselfb9872d5 = document.getElementById('_pic_b9872d5')
            let isInViewPortOfTwob9872d5 = function () {
                const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                const top = imgselfb9872d5.getBoundingClientRect() && imgselfb9872d5.getBoundingClientRect().top
                if (top  <= viewPortHeight + 300) {
                    document.getElementById('_pic_b9872d5').src = document.getElementById('_pic_b9872d5').getAttribute('href')
                    document.getElementById('_pic_b9872d5').classList = ['showpic']
                    document.getElementById('_showpic_b9872d5').style.display = 'none'
                    window.removeEventListener('scroll', isInViewPortOfTwob9872d5)
                    isInViewPortOfTwob9872d5 = null
                }
            }
            isInViewPortOfTwob9872d5 ()
            window.addEventListener('scroll', isInViewPortOfTwob9872d5)
        </script>
    </p>
<p>é‚£ä¹ˆæˆ‘ä»¬è¯´æ—¢ç„¶éƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸”å®ƒä»¬åœ¨GCorçš„çœ¼é‡Œåæ­£éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¸ºä»€ä¹ˆä¸å°†ä»–ä»¬æ”¾åœ¨ä¸€èµ·å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¦å°†ç±»å¯¹è±¡æ”¾åœ¨PermGenå‘¢ï¼Ÿ</p>
<p>æœ‰ä¸€ä¸ªæŠ€æœ¯ä¸Šçš„åŸå› æ˜¯ï¼ŒClasså¯¹è±¡ä»…ä»…åªæ˜¯ç”¨æ¥ç»™JVMçœ‹çš„ï¼Œè€ŒHeapä¸­çš„å…¶ä»–ç¨‹åºä¸šåŠ¡ç›¸å…³çš„ç¤ºä¾‹å¯¹è±¡ï¼Œæ˜¯Javaå¼€å‘è€…çœŸæ­£è¦å»å…³å¿ƒçš„ï¼Œå¦‚æœè¯´è¿™ä¸¤ä¸ªæ”¾åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆå¼€å‘è€…å¯èƒ½éœ€è¦èŠ±è´¹å¤§é‡çš„ç²¾åŠ›å»ç†è§£è¿™äº›Classå¯¹è±¡ç”šè‡³æ˜¯å¤„ç†å®ƒä»¬å¯èƒ½ä¼šæŠ¥å‡ºæ¥çš„é”™è¯¯ï¼›</p>
<p>åœ¨æ›´ä¹…ä»¥å‰ï¼Œå®ƒä¿©ç¡®å®æ˜¯æ”¾åœ¨ä¸€èµ·çš„ï¼Œä½†æ˜¯å› ä¸ºç³»ç»Ÿç±»å’Œå¼€å‘è€…å†™çš„è‡ªå®šä¹‰ç±»çš„è£…è½½è¡Œä¸ºä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¸è½½è¡Œä¸ºå˜å¾—å¾ˆå°‘å‘ç”Ÿï¼Œå‡ºäºæ€§èƒ½ä¼˜åŒ–çš„è€ƒè™‘æ‰æ¨å‡ºäº†PermGenï¼Œæ•ˆæœä¹Ÿå¾ˆæ˜¾è‘—ï¼›</p>
<p>è¿˜æœ‰æ›´å¤šçš„ç»†èŠ‚ï¼Œè¿˜æ˜¯å»å‚è€ƒä¸Šé¢æ”¾å‡ºçš„ç¬¬äºŒä¸ªåŸæ–‡è¿æ¥</p>

          <h4>
            <a name="_root-In Java 8" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            In Java 8
          </h4><p>PermGen Spaceè¢«ä¸€ä¸ªæ–°çš„åŒºåŸŸæ›¿ä»£â€”â€”Metaspaceï¼Œå®ƒå’Œå‰è€…çš„ä¸åŒä¹‹å¤„å°±åœ¨äºï¼šå®ƒå¹¶ä¸é™åˆ¶é»˜è®¤çš„æœ€å¤§å¯ç”¨ç©ºé—´ï¼Œè™½ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾ç½®ï¼š</p>
<p><code>-XX:MetaspaceSize=N</code>  - sets the initial (and minimum size) of the Metaspace.</p>
<p><code>-XX:MaxMetaspaceSize=N</code>  - sets the maximum size of the Metaspace.</p>
<p>æœ‰å…³Metaspaceçš„ç‰¹ç‚¹ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸ªå¤§ç¥å†™çš„<a href="https://www.cnblogs.com/duanxz/p/3520829.html">æ–‡ç« </a>ï¼Œä»¥åæˆ‘æœ‰æ—¶é—´ä¹Ÿç ”ç©¶ä¸€ä¸‹</p>

          <h4>
            <a name="_root-So" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            So
          </h4><p>æ‰€ä»¥æ°¸ä¹…ä»£çš„ä¸€éƒ¨åˆ†è¢«ç§»åˆ°æ™®é€šå †ï¼Œå‰©ä¸‹çš„ç”¨Metaspace Native Memoryæ›¿ä»£äº†</p>

          <h3>
            <a name="_root-Syntactic Sugar" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Syntactic Sugar
          </h3><p>å‚è€ƒè‡ªï¼š<a href="https://www.experts-exchange.com/articles/17406/String-concatenation-in-Java-syntactic-sugar-versus-efficiency.html">String concatenation in Java: syntactic sugar versus efficiency</a></p>
<p>Java provides two main ways to perform string concatenation and one of them could cause you some trouble. The first one most of us encounter is the <strong>+</strong> operator, where doing something like <strong>String value = &quot;Hello &quot; + &quot;world&quot;;</strong> results in a string with the value <strong>&quot;Hello world&quot;</strong>. Most of the time, developers don&#39;t immediately learn that the <strong>+</strong> operator is just <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a> that the compiler turns into <strong>StringBuilder</strong> operations, that being the other main way one can concatenate strings in Java.</p>
<p>Just about every time the compiler encounters a <strong>+ operator</strong> that has <strong>String objects</strong> or literals as its arguments, it translates that code into a three-step sequence of operations:</p>
<ol>
<li>Create a new <strong>StringBuilder</strong> instance, passing the first argument to its constructor.</li>
<li>Call <strong>StringBuilder.append()</strong> and pass the second argument.</li>
<li>Call <strong>StringBuilder.toString()</strong>.</li>
</ol>
<pre><code class="language-java">String s1 = &quot;12&quot;;
String s2 = &quot;1&quot;;
String s3 = s2 + &quot;1&quot;;    // sb way
System.out.println(s1 == s3); // false</code></pre>

          <h3>
            <a name="_root-String.intern()" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            String.intern()
          </h3><p><a href="https://mp.weixin.qq.com/s/Zs8en3T8TxCMbxGWHkDwBw?comefrom=http://blogread.cn/news/">è½¬è‡ª</a></p>
<p><strong>ç¼–è¯‘æœŸ</strong>ç”Ÿæˆçš„å„ç§<strong>å­—é¢é‡</strong>å’Œ<strong>ç¬¦å·å¼•ç”¨</strong>æ˜¯è¿è¡Œæ—¶å¸¸é‡æ± ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†æ¥æºï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚é‚£ä¹ˆè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå¯ä»¥åœ¨è¿è¡ŒæœŸåƒè¿è¡Œæ—¶å¸¸é‡æ± ä¸­å¢åŠ å¸¸é‡ã€‚é‚£å°±æ˜¯<code>String</code>çš„<code>intern</code>æ–¹æ³•ã€‚</p>
<p>å½“ä¸€ä¸ª<code>String</code>å®ä¾‹è°ƒç”¨<code>intern()</code>æ–¹æ³•æ—¶ï¼ŒJVMä¼šæŸ¥æ‰¾å¸¸é‡æ± ä¸­æ˜¯å¦æœ‰ç›¸åŒUnicodeçš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿”å›å…¶çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­å¢åŠ ä¸€ä¸ªUnicodeç­‰äºstrçš„å­—ç¬¦ä¸²å¹¶è¿”å›å®ƒçš„å¼•ç”¨ï¼›</p>
<p><strong>intern()æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œç¬¬ä¸€ä¸ªæ˜¯å°†å­—ç¬¦ä¸²å­—é¢é‡æ”¾å…¥å¸¸é‡æ± ï¼ˆå¦‚æœæ± æ²¡æœ‰çš„è¯ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯è¿”å›è¿™ä¸ªå¸¸é‡çš„å¼•ç”¨ã€‚</strong></p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="language-java">String s1 = &quot;Hollis&quot;;
String s2 = new String(&quot;Hollis&quot;);
String s3 = new String(&quot;Hollis&quot;).intern();

System.out.println(s1 == s2);    // false
System.out.println(s1 == s3);    // true</code></pre>
<p>
        <div id="_showpic_a29878ec" class="showpicbtn">æ­£åœ¨æ˜¾ç¤ºå›¾ç‰‡ >></div>
        <img id="_pic_a29878ec" href=https://image.youyinnn.top/20190302153504.png class="hidepic" ></img>
        <script>
            let imgselfa29878ec = document.getElementById('_pic_a29878ec')
            let isInViewPortOfTwoa29878ec = function () {
                const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                const top = imgselfa29878ec.getBoundingClientRect() && imgselfa29878ec.getBoundingClientRect().top
                if (top  <= viewPortHeight + 300) {
                    document.getElementById('_pic_a29878ec').src = document.getElementById('_pic_a29878ec').getAttribute('href')
                    document.getElementById('_pic_a29878ec').classList = ['showpic']
                    document.getElementById('_showpic_a29878ec').style.display = 'none'
                    window.removeEventListener('scroll', isInViewPortOfTwoa29878ec)
                    isInViewPortOfTwoa29878ec = null
                }
            }
            isInViewPortOfTwoa29878ec ()
            window.addEventListener('scroll', isInViewPortOfTwoa29878ec)
        </script>
    </p>
<p>ç”±äºs1å’Œs3éƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„å­—é¢é‡çš„å¼•ç”¨ï¼Œæ‰€ä»¥s1==s3ã€‚ä½†æ˜¯ï¼Œs2çš„å¼•ç”¨æ˜¯å †ä¸­çš„å¯¹è±¡ï¼Œæ‰€ä»¥s2!=s1ã€‚</p>

          <h4>
            <a name="_root-Real Purpose Of String.intern()" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Real Purpose Of String.intern()
          </h4><p>ä¸çŸ¥é“ï¼Œä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œåœ¨<code>String s3 = new String(&quot;Hollis&quot;).intern();</code>ä¸­ï¼Œå…¶å®<code>intern</code>æ˜¯å¤šä½™çš„ï¼Ÿ</p>
<p>å› ä¸ºå°±ç®—ä¸ç”¨<code>intern</code>ï¼ŒHollisä½œä¸ºä¸€ä¸ªå­—é¢é‡ä¹Ÿä¼šè¢«åŠ è½½åˆ°Classæ–‡ä»¶çš„å¸¸é‡æ± ï¼Œè¿›è€ŒåŠ å…¥åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œä¸ºå•¥è¿˜è¦å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿåˆ°åº•ä»€ä¹ˆåœºæ™¯ä¸‹æ‰ä¼šç”¨åˆ°internå‘¢?</p>
<p>åœ¨è§£é‡Šè¿™ä¸ªä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-java">String s1 = &quot;Hollis&quot;;
String s2 = &quot;Chuang&quot;;
String s3 = s1 + s2;
String s4 = &quot;Hollis&quot; + &quot;Chuang&quot;;</code></pre>
<p>åœ¨ç»è¿‡åç¼–è¯‘åï¼Œå¾—åˆ°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">String s1 = &quot;Hollis&quot;;
String s2 = &quot;Chuang&quot;;
String s3 = (new StringBuilder()).append(s1).append(s2).toString();
String s4 = &quot;HollisChuang&quot;;</code></pre>
<p>å¯ä»¥å‘ç°ï¼ŒåŒæ ·æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œs3å’Œs4åœ¨ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åçš„å®ç°æ–¹å¼å¹¶ä¸ä¸€æ ·ã€‚s3è¢«è½¬åŒ–æˆ<code>StringBuilder</code>åŠ<code>append</code>ï¼Œè€Œs4è¢«ç›´æ¥æ‹¼æ¥æˆæ–°çš„å­—ç¬¦ä¸²ã€‚</p>
<p>å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ è¿˜èƒ½å‘ç°ï¼Œ<code>String s4 = s1 + s2;</code> ç»è¿‡ç¼–è¯‘ä¹‹åï¼Œå¸¸é‡æ± ä¸­æ˜¯æœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²å¸¸é‡çš„åˆ†åˆ«æ˜¯ <code>Hollis</code>ã€<code>Chuang</code>ï¼ˆå…¶å®<code>Hollis</code>å’Œ<code>Chuang</code>æ˜¯<code>String s1 = &quot;Hollis&quot;;</code>å’Œ<code>String s2 = &quot;Chuang&quot;;</code>å®šä¹‰å‡ºæ¥çš„ï¼‰ï¼Œæ‹¼æ¥ç»“æœ<code>HollisChuang</code>å¹¶ä¸åœ¨å¸¸é‡æ± ä¸­ã€‚</p>
<p>å¦‚æœä»£ç åªæœ‰<code>String s4 = &quot;Hollis&quot; + &quot;Chuang&quot;;</code>ï¼Œé‚£ä¹ˆå¸¸é‡æ± ä¸­å°†åªæœ‰<code>HollisChuang</code>è€Œæ²¡æœ‰Holliså’Œ Chuangã€‚</p>
<p>ç©¶å…¶åŸå› ï¼Œæ˜¯å› ä¸ºå¸¸é‡æ± è¦ä¿å­˜çš„æ˜¯<strong>å·²ç¡®å®š</strong>çš„å­—é¢é‡å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œçº¯å­—é¢é‡å’Œå­—é¢é‡çš„æ‹¼æ¥ï¼Œä¼šæŠŠæ‹¼æ¥ç»“æœä½œä¸ºå¸¸é‡ä¿å­˜åˆ°å­—ç¬¦ä¸²ã€‚</p>
<p>å¦‚æœåœ¨å­—ç¬¦ä¸²æ‹¼æ¥ä¸­ï¼Œæœ‰ä¸€ä¸ªå‚æ•°æ˜¯éå­—é¢é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªå˜é‡çš„è¯ï¼Œæ•´ä¸ªæ‹¼æ¥æ“ä½œä¼šè¢«ç¼–è¯‘æˆ<code>StringBuilder.append</code>ï¼Œè¿™ç§æƒ…å†µç¼–è¯‘å™¨æ˜¯æ— æ³•çŸ¥é“å…¶ç¡®å®šå€¼çš„ã€‚åªæœ‰åœ¨è¿è¡ŒæœŸæ‰èƒ½ç¡®å®šã€‚</p>
<p>é‚£ä¹ˆï¼Œæœ‰äº†è¿™ä¸ªç‰¹æ€§äº†ï¼Œ<code>intern</code>å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚<strong>é‚£å°±æ˜¯å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­ç”¨åˆ°çš„å­—ç¬¦ä¸²æ˜¯åªæœ‰åœ¨è¿è¡ŒæœŸæ‰èƒ½ç¡®å®šçš„ï¼Œåœ¨ç¼–è¯‘æœŸæ˜¯æ— æ³•ç¡®å®šçš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ²¡åŠæ³•åœ¨ç¼–è¯‘æœŸè¢«åŠ å…¥åˆ°å¸¸é‡æ± ä¸­ã€‚</strong></p>
<p>è¿™æ—¶å€™ï¼Œå¯¹äºé‚£ç§å¯èƒ½ç»å¸¸ä½¿ç”¨çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨<code>intern</code>è¿›è¡Œå®šä¹‰ï¼Œæ¯æ¬¡JVMè¿è¡Œåˆ°è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥æŠŠå¸¸é‡æ± ä¸­è¯¥å­—é¢å€¼çš„å¼•ç”¨è¿”å›ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘å¤§é‡å­—ç¬¦ä¸²å¯¹è±¡çš„åˆ›å»ºäº†ã€‚</p>
<p>å¦‚ä¸€ç¾å›¢ç‚¹è¯„å›¢é˜Ÿçš„ã€Šæ·±å…¥è§£æString#internã€‹æ–‡ä¸­ä¸¾çš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-java">static final int MAX = 1000 * 10000;
static final String[] arr = new String[MAX];

public static void main(String[] args) throws Exception {
    Integer[] DB_DATA = new Integer[10];
    Random random = new Random(10 * 10000);
    for (int i = 0; i &lt; DB_DATA.length; i++) {
        DB_DATA[i] = random.nextInt();
    }
    for (int i = 0; i &lt; MAX; i++) {
         arr[i] = new String(String.valueOf(DB_DATA[i % DB_DATA.length])).intern();
    }
}</code></pre>
<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜ç¡®çš„çŸ¥é“ï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤çš„ç›¸åŒçš„å­—ç¬¦ä¸²äº§ç”Ÿï¼Œä½†æ˜¯è¿™äº›å­—ç¬¦ä¸²çš„å€¼éƒ½æ˜¯åªæœ‰åœ¨è¿è¡ŒæœŸæ‰èƒ½ç¡®å®šçš„ã€‚æ‰€ä»¥ï¼Œåªèƒ½æˆ‘ä»¬é€šè¿‡<code>intern</code>æ˜¾ç¤ºçš„å°†å…¶åŠ å…¥å¸¸é‡æ± ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¾ˆå¤šå­—ç¬¦ä¸²çš„é‡å¤åˆ›å»ºã€‚</p>

          <h3>
            <a name="_root-Switch For String" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Switch For String
          </h3><p>è¿˜æ˜¯å…ˆä¸Šä»£ç ï¼š</p>
<pre><code class="language-java">public class switchDemoString {
    public static void main(String[] args) {
        String str = &quot;world&quot;;
        switch (str) {
        case &quot;hello&quot;:
            System.out.println(&quot;hello&quot;);
            break;
        case &quot;world&quot;:
            System.out.println(&quot;world&quot;);
            break;
        default:
            break;
        }
    }
}</code></pre>
<p>å¯¹ä»£ç è¿›è¡Œåç¼–è¯‘ï¼š</p>
<pre><code class="language-java">public class switchDemoString
{
    public switchDemoString()
    {
    }
    public static void main(String args[])
    {
        String str = &quot;world&quot;;
        String s;
        switch((s = str).hashCode())
        {
        default:
            break;
        case 99162322:
            if(s.equals(&quot;hello&quot;))
                System.out.println(&quot;hello&quot;);
            break;
        case 113318802:
            if(s.equals(&quot;world&quot;))
                System.out.println(&quot;world&quot;);
            break;
        }
    }
}</code></pre>
<p>çœ‹åˆ°è¿™ä¸ªä»£ç ï¼Œä½ çŸ¥é“åŸæ¥å­—ç¬¦ä¸²çš„switchæ˜¯é€šè¿‡<code>equals()</code>å’Œ<code>hashCode()</code>æ–¹æ³•æ¥å®ç°çš„ã€‚<strong>è®°ä½ï¼Œswitchä¸­åªèƒ½ä½¿ç”¨æ•´å‹</strong>ï¼Œæ¯”å¦‚<code>byte</code>ï¼Œ<code>short</code>ï¼Œ<code>char</code>(ackiiç æ˜¯æ•´å‹)ä»¥åŠ<code>int</code>ã€‚</p>
<p>ä»”ç»†çœ‹ä¸‹å¯ä»¥å‘ç°ï¼Œè¿›è¡Œ<code>switch</code>çš„å®é™…æ˜¯å“ˆå¸Œå€¼ï¼Œç„¶åé€šè¿‡ä½¿ç”¨equalsæ–¹æ³•æ¯”è¾ƒè¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œè¿™ä¸ªæ£€æŸ¥æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå“ˆå¸Œå¯èƒ½ä¼šå‘ç”Ÿç¢°æ’ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<strong>å…¶å®swichåªæ”¯æŒä¸€ç§æ•°æ®ç±»å‹ï¼Œé‚£å°±æ˜¯æ•´å‹ï¼Œå…¶ä»–æ•°æ®ç±»å‹éƒ½æ˜¯è½¬æ¢æˆæ•´å‹ä¹‹ååœ¨ä½¿ç”¨switchçš„ã€‚</strong></p>

          <h3>
            <a name="_root-Substring In Java6 &amp; Java7" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Substring In Java6 &amp; Java7
          </h3><p>ç®€å•ä¸€å¥è¯ï¼Œ6é‡Œçš„æ–¹æ³•å¾—å‡ºçš„å­ä¸²è¿˜å’Œæºä¸²æœ‰è”ç³»ï¼Œæ‰€ä»¥ä¼šå¼•å‘å†…å­˜æ³„æ¼é—®é¢˜ï¼›è€Œ7çš„æ–¹æ³•ä¼šçœŸæ­£åˆ†é…ä¸€ä¸ªç©ºé—´å­˜å‚¨å­—ä¸²ï¼›</p>

          <h3>
            <a name="_root-Concating String" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Concating String
          </h3><p>ç»ˆäºæ¥åˆ°æˆ‘ä»¬çš„å¼•å­äº†</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code>+</code>å»æ‹¼æ¥ï¼Œå¯¹äºå­—é¢é‡è€Œè¨€ï¼Œé¦–å…ˆå°±å¯ä»¥ç›´æ¥+èµ·æ¥</p>
<p>ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºStringå¯¹è±¡ä¹‹é—´è€Œè¨€ï¼Œ<code>+</code>æ˜¯Javaä¸­çš„è¯­æ³•ç³–ï¼Œå‰é¢æˆ‘ä»¬æœ‰ä¸€æ®µåç¼–è¯‘å°±çŸ¥é“ï¼Œç¼–è¯‘åå…¶å®æ˜¯<code>StringBuilder.append()</code></p>
<pre><code class="language-java">String a = &quot;xixi&quot;;
String b = &quot;haha&quot;;

String s1 = &quot;xixi&quot; + &quot;haha&quot;;
String s2 = a.concat(b);
String s3 = a + b; // (new StringBuilder()).append(a).append(b).toString();</code></pre>
<p>æ‰€ä»¥è¯´ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å¯¹è±¡ä¸æ¨èåœ¨forå¾ªç¯ä¸­ç”¨+å»è¿æ¥å‘¢ï¼Ÿå› ä¸ºè¿™æ ·åšæ¯å±‚å¾ªç¯éƒ½ä¼šåˆ›é€ ä¸€ä¸ªæ–°çš„<code>StringBuilder</code>å¯¹è±¡ï¼Œå€’ä¸å¦‚ç›´æ¥å®šä¹‰ä¸€ä¸ª<code>StringBuilder</code>åœ¨å¤–è¾¹ï¼Œç»Ÿä¸€ç”¨å®ƒå»è¿æ¥æ‰€æœ‰çš„å­—ç¬¦ä¸²</p>
<p>è€Œconcatçš„æºç ä¸€è¯»å°±æ‡‚ï¼š</p>
<pre><code class="language-java">public String concat(String str) {
    int otherLen = str.length();
    if (otherLen == 0) {
        return this;
    }
    int len = value.length;
    char buf[] = Arrays.copyOf(value, len + otherLen);
    str.getChars(buf, len);
    return new String(buf, true);
}</code></pre>
<p>ç„¶åå°±æ˜¯æ˜¾ç¤ºåœ°ä½¿ç”¨<code>StringBuilder</code>ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰ã€å’Œ<code>StringBuffer</code>ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰å»æ‹¼æ¥äº†</p>
<p>æ›´å¤šçš„æ˜¯ï¼Œ<code>String.join()</code>ï¼ˆJava 8ï¼‰æˆ–è€…<code>StringUtils.join()</code>æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸»è¦æ˜¯è®©å¤šä¸ªä¸²ä¹‹é—´ä»¥æŸä¸ªåˆ†éš”ç¬¦è¿æ¥åœ¨ä¸€èµ·</p>
<p>ç„¶ååœ¨Java 8ä¸­ï¼Œåˆæ–°å¢äº†<code>StringJoiner</code>ï¼Œåœ¨å‰è¾ˆçš„<a href="https://juejin.im/entry/5c75e576e51d453ed7681719/">æ–‡ç« </a>ä¸­è¯´åˆ°è¿‡ï¼šå®ƒçš„å®ç°å‡ ä¹å°±æ˜¯<code>StringBuilder</code>ï¼Œæ‰€ä»¥æ€§èƒ½å·®ä¸å¤šï¼Œä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œä¹‹æ‰€ä»¥å¢åŠ è¿™ä¸ªç±»ï¼Œæ˜¯å› ä¸ºé…åˆJava 8 Streamçš„ç‰¹æ€§ï¼š</p>
<pre><code class="language-java">// å‡å¦‚è¯´æœ‰
List&lt;String&gt; list = ImmutableList.of(&quot;Hollis&quot;,&quot;hollischuang&quot;,&quot;Javaå¹²è´§&quot;);

// æƒ³æ‹¼æ¥åœ¨ä¸€èµ·æˆ‘ä»¬å¯ä»¥ï¼š
StringBuilder builder = new StringBuilder();
if (!list.isEmpty()) {    
    builder.append(list.get(0));    
    for (int i = 1, n = list.size(); i &lt; n; i++) {
        builder.append(&quot;,&quot;).append(list.get(i));    
    }
}
builder.toString();

// åˆæˆ–è€…
list.stream().reduce(new StringBuilder(), (sb, s) -&gt; sb.append(s).append(&#39;,&#39;), StringBuilder::append).toString();

// ç”šè‡³æ˜¯
list.stream().reduce((a,b)-&gt;a + &quot;,&quot; + b).toString();

// ä½†æˆ‘ä»¬ç°åœ¨å¯ä»¥
list.stream().collect(Collectors.joining(&quot;:&quot;));</code></pre>
<p>è€Œ<code>Collectors.joining()</code>çš„å®ç°å°±æ˜¯é€šè¿‡<code>StringJoiner</code>å»åšçš„</p>
<blockquote>
<p>å½“ç„¶ï¼Œæˆ–è®¸åœ¨Collectorä¸­ç›´æ¥ä½¿ç”¨StringBuilderä¼¼ä¹ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œåªä¸è¿‡ç¨å¾®éº»çƒ¦ä¸€äº›</p>
<p>æ‰€ä»¥ï¼ŒJava 8ä¸­æä¾›äº†StringJoineræ¥ä¸°å¯ŒStreamçš„ç”¨æ³• </p>
<p>è€Œä¸”StringJoinerä¹Ÿå¯ä»¥æ–¹ä¾¿çš„å¢åŠ å‰ç¼€å’Œåç¼€ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„å­—ç¬¦ä¸²æ˜¯&quot;[Hollis,hollischuang,Javaå¹²è´§]&quot;è€Œä¸æ˜¯&quot;Hollis,hollischuang,Javaå¹²è´§&quot;çš„è¯ï¼ŒStringJoinerçš„ä¼˜åŠ¿å°±æ›´åŠ æ˜æ˜¾äº†</p>
</blockquote>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

</body>

</html>