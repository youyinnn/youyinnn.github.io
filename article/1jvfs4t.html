<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/loadscripts.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/myjs/jump-1.2.js"></script>
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/resources/resources.js"></script>
    <script src="/myjs/scriptlist.js"></script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg">ğŸš€</button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <div id="homepage-center">
            <div id="slogan">
                <i id="wolf-logo" style="font-style: normal;" class="mr-4">ğŸŒ‘</i><span id="slogan-text"></span>
            </div>
            <div id="homepage-btn">
                <div id="showmore"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; About Me & This Blog</div>
                <div id="showhacknical"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Github Analysis</div>
                <div id="toarticles"> &nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp; My Tech Articles</div>
            </div>
        </div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistics</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Online:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Chars:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Categories:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tags:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Last update:</td>
                    <td style="text-align:left" id="stat_last_update"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search">
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-light" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-light" type="button">cates</button>
                <button id="tags" class="btn btn-light" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-light" type="button" title="search">sch</button>
            </div>
        </div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container markdown-toc"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        
          <h3 id="e25a21eb">
            <a name="_root-Introduction" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Introduction
          </h3><p>å‰é¢è¯´äº†æŒºå¤šå…³äºGCçš„ç®—æ³•æ€è·¯ï¼Œæ¥ä¸‹æ¥è¿™ç¯‡è¯´è¯´åœ¨JVMé‡Œå®é™…å®ç°çš„GCç®—æ³•ï¼Œç¿»è¯‘ã€å‚è€ƒè‡ª<a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations">plumbr.io</a></p>
<p>æˆ‘ä»¬é¦–å…ˆè¦æ¸…æ¥šåœ°è®¤è¯†åˆ°ä¸€ä¸ªäº‹æƒ…ï¼šé™¤äº†G1å›æ”¶å™¨ä»¥å¤–ï¼Œåƒåœ¾å›æ”¶ç®—æ³•åˆ†ä¸º<strong>â€œé’ˆå¯¹æ–°ç”Ÿä»£â€</strong>ï¼Œ<strong>â€œé’ˆå¯¹è€å¹´ä»£â€</strong>ä¸¤ç§</p>
<p>æ¯ç§åƒåœ¾å›æ”¶ç®—æ³•åˆæœ‰ä¸åŒçš„å®ç°ï¼Œç„¶åä½ å¯ä»¥éšæ„ç»„åˆï¼Œä¸‹é¢è¿™å¼ è¡¨å±•ç¤ºäº†åœ¨Java8ä¸‹å¸¸ç”¨çš„å››ç§GCç®—æ³•çš„ç»„åˆ</p>
<table>
<thead>
<tr>
<th align="left"><strong>Young</strong></th>
<th align="left"><strong>Tenured</strong></th>
<th align="left"><strong>JVM options</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Serial</strong></td>
<td align="left"><strong>Serial</strong></td>
<td align="left"><strong>-XX:+UseSerialGC</strong></td>
</tr>
<tr>
<td align="left"><strong>Parallel Scavenge</strong></td>
<td align="left"><strong>Parallel Old</strong></td>
<td align="left"><strong>-XX:+UseParallelGC -XX:+UseParallelOldGC</strong></td>
</tr>
<tr>
<td align="left"><strong>Parallel New</strong></td>
<td align="left"><strong>CMS</strong></td>
<td align="left"><strong>-XX:+UseParNewGC -XX:+UseConcMarkSweepGC</strong></td>
</tr>
<tr>
<td align="left"><strong>G1</strong></td>
<td align="left"></td>
<td align="left"><strong>-XX:+UseG1GC</strong></td>
</tr>
</tbody></table>
<p>å®é™…ä¸Šè¿˜æœ‰å…¶ä»–æ­é…ï¼Œä½†æ˜¯è¿™äº›æ­é…è¦ä¹ˆæ˜¯ä¸æ”¯æŒäº†ï¼Œè¦ä¹ˆæ˜¯ä¸å®ç”¨äº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬åªå…³æ³¨è¿™å››ç§</p>

          <h3 id="790f0115">
            <a name="_root-Serial GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Serial GC
          </h3><p><strong>Serail GC</strong>ä½¿ç”¨<a href="https://youyinnn.github.io/?to=post&amp;number=77#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-2.%20Mark-Copy">æ ‡è®°-å¤åˆ¶</a>ç®—æ³•å›æ”¶å¹´è½»ä»£ï¼Œä½¿ç”¨<a href="">æ ‡è®°-æ•´ç†</a>ç®—æ³•å›æ”¶è€å¹´ä»£</p>
<p>å’Œå®ƒçš„åå­—ä¸€æ ·ï¼Œä¸²è¡Œæ”¶é›†å™¨åœ¨è¿™ä¸¤ä¸ªåŒºåŸŸåªèƒ½<strong>ä¸²è¡Œåœ°</strong>æ”¶é›†ï¼Œè¿™ä¸¤ä¸ªåŒºåŸŸçš„æ”¶é›†ä¹Ÿä¼šè§¦å‘<strong>å¤§æš‚åœ</strong></p>
<p>æ‰€ä»¥è¿™ä¸ªæ”¶é›†å™¨å¹¶ä¸èƒ½åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿ï¼Œå®ƒåœ¨å·¥ä½œçš„æ—¶å€™å°±åªä¼šä½¿ç”¨ä¸€ä¸ªCPUï¼Œè¦å¼€å¯è¿™ä¸ªæ”¶é›†å™¨ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨çš„æ—¶å€™åŠ ä¸Šä¸€è¡Œå‚æ•°ï¼š</p>
<pre><code>java -XX:+UseSerialGC com.mypackage.MyClass</code></pre><p>é€‰æ‹©è¿™ä¸ªæ”¶é›†å™¨çš„è¯ï¼Œæœ€å¥½æ˜¯åœ¨JVMåªè¿è¡Œå°å‡ ç™¾å…†çš„å †å†…å­˜çš„æ—¶å€™ï¼Œå¹¶ä¸”è¿è¡Œåœ¨å•æ ¸æœºå™¨ä¸Šçš„æ—¶å€™æ‰å¥½ï¼Œå› ä¸ºå¤§åŠæ•°çš„æœåŠ¡ç«¯æœºå™¨éƒ½ä¼šæœ‰å¾ˆé«˜çš„é…ç½®ï¼Œå¦‚æœä½¿ç”¨<strong>ä¸²è¡Œ</strong>æ”¶é›†çš„è¯ï¼Œæ„å‘³ç€ä½ çš„ç³»ç»Ÿæ²¡æœ‰å‘æŒ¥æœ€å¤§çš„æœºå™¨æ€§èƒ½</p>

          <h4 id="cd8ca102">
            <a name="_root-GC Log" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            GC Log
          </h4>
          <h5 id="ff499e68">
            <a name="_root-Minor GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Minor GC
          </h5><p>ä¸‹é¢æ˜¯ä¸€æ¬¡<strong>Serial GC</strong>çš„Minor GCçš„å¿«ç…§ï¼š</p>
<p>Following snippet contains the information about a GC event cleaning the Young Generation:</p>
<p><code>2015-05-26T14:45:37.987-0200</code>:<code>151.126</code>:[<code>GC</code>(<code>Allocation Failure</code>) 151.126: [<code>DefNew</code>:<code>629119K-&gt;69888K</code> <code>(629120K)</code>, 0.0584157 secs]<code>1619346K-&gt;1273247K</code> <code>(2027264K)</code>,<code>0.0585007 secs</code>]<code>[Times: user=0.06 sys=0.00, real=0.06 secs]</code></p>
<ol>
<li><p><strong>2015-05-26T14:45:37.987-0200</strong> â€“ Time when the GC event started.</p>
</li>
<li><p><strong>151.126</strong> â€“ Time when the GC event started, relative to the JVM startup time. Measured in seconds.</p>
</li>
<li><p><strong>GC</strong> â€“ Flag to distinguish between Minor &amp; Full GC. This time it is indicating that this was a Minor GC.</p>
</li>
<li><p><strong>Allocation Failure</strong> â€“ Cause of the collection. In this case, the GC is triggered due to a data structure not fitting into any region in the Young Generation.</p>
</li>
<li><p><strong>DefNew</strong> â€“ Name of the garbage collector used. This cryptic name stands for the single-threaded mark-copy stop-the-world garbage collector used to clean Young generation.</p>
</li>
<li><p><strong>629119K-&gt;69888K</strong> â€“ Usage of the Young Generation before and after collection.</p>
</li>
<li><p><strong>(629120K)</strong> â€“ Total size of the Young Generation.</p>
</li>
<li><p><strong>1619346K-&gt;1273247K</strong> â€“ Total used heap before and after collection.</p>
</li>
<li><p><strong>(2027264K)</strong> â€“ Total available heap.</p>
</li>
<li><p><strong>0.0585007 secs</strong> â€“ Duration of the GC event in seconds.</p>
</li>
<li><p><strong>[Times: user=0.06 sys=0.00, real=0.06 secs]</strong> </p>
<p>â€“ Duration of the GC event, measured in different categories:</p>
<ul>
<li>user â€“ Total CPU time that was consumed by the garbage collector threads during this collection</li>
<li>sys â€“ Time spent in OS calls or waiting for system event</li>
<li>real â€“ Clock time for which your application was stopped. As Serial Garbage Collector always uses just a single thread, real time is thus equal to the sum of user and system times.</li>
</ul>
</li>
</ol>
<p>ä¸‹å›¾æ˜¯è¿™æ¬¡logçš„å†…å­˜å›¾å˜åŒ–ï¼š</p>
<p>
        <div class="_showpic_e740dec3 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/serial-gc-in-young-generation.png class="_pic_e740dec3 hidepic" picId="e740dec3"></img>
        <script>
            {
                let imgselfe740dec3s = document.getElementsByClassName('_pic_e740dec3')
                let showpicbtne740dec3s = document.getElementsByClassName('_showpic_e740dec3')
                let isInViewPortOfTwoe740dec3 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselfe740dec3s[0].getBoundingClientRect() && imgselfe740dec3s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselfe740dec3s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwoe740dec3)
                            isInViewPortOfTwoe740dec3 = null
                        }
                        for (el of showpicbtne740dec3s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwoe740dec3 ()
                window.addEventListener('scroll', isInViewPortOfTwoe740dec3)
            }
        </script>
    </p>
<p>ä»å¿«ç…§ç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¹´è½»ä»£çš„å¯¹è±¡è¦ä¹ˆè¢«æ¸…ç†æ‰äº†ï¼Œè¦ä¹ˆå­˜æ´»ä¸‹æ¥è¿›å…¥S2äº†ï¼Œè¦ä¹ˆè¢«promotedåˆ°äº†è€å¹´ä»£</p>

          <h5 id="4f74527c">
            <a name="_root-Full GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Full GC
          </h5><p><code>2015-05-26T14:45:59.690-0200</code>: <code>172.829</code>:[GC (Allocation Failure) 172.829:[<code>DefNew: 629120K-&gt;629120K(629120K), 0.0000372 secs</code>]172.829:[<code>Tenured</code>: <code>1203359K-&gt;755802K</code> <code>(1398144K)</code> ,<code>0.1855567 secs</code>] <code>1832479K-&gt;755802K</code> <code>(2027264K)</code>,<code>[Metaspace: 6741K-&gt;6741K(1056768K)]</code> <code>[Times: user=0.18 sys=0.00, real=0.18 secs]</code></p>
<ol>
<li><p><strong>2015-05-26T14:45:59.690-0200</strong> â€“ Time when the GC event started.</p>
</li>
<li><p><strong>172.829</strong> â€“ Time when the GC event started, relative to the JVM startup time. Measured in seconds.</p>
</li>
<li><p><strong>DefNew: 629120K-&gt;629120K(629120K), 0.0000372 secs</strong> â€“ Similar to the previous example, a minor garbage collection in the Young Generation happened during this event due to Allocation Failure. For this collection the same DefNew collector was run as before and it decreased the usage of the Young Generation from 629120K to 0. Notice that JVM reports this incorrectly due to buggy behavior and instead reports the Young Generation as being completely full. This collection took 0.0000372 seconds.</p>
</li>
<li><p><strong>Tenured</strong> â€“ Name of the garbage collector used to clean the Old space. The name Tenured indicates a single-threaded stop-the-world mark-sweep-compact garbage collector being used.</p>
</li>
<li><p><strong>1203359K-&gt;755802K</strong> â€“ Usage of Old generation before and after the event.</p>
</li>
<li><p><strong>(1398144K)</strong> â€“ Total capacity of the Old generation.</p>
</li>
<li><p><strong>0.1855567 secs</strong> â€“ Time it took to clean the Old Generation.</p>
</li>
<li><p><strong>1832479K-&gt;755802K</strong> â€“ Usage of the whole heap before and after the collection of the Young and Old Generations.</p>
</li>
<li><p><strong>(2027264K)</strong> â€“ Total heap available for the JVM.</p>
</li>
<li><p><strong>[Metaspace: 6741K-&gt;6741K(1056768K)]</strong> â€“ Similar information about Metaspace collection. As seen, no garbage was collected in Metaspace during the event.</p>
</li>
<li><p><strong>[Times: user=0.18 sys=0.00, real=0.18 secs]</strong></p>
<p>â€“ Duration of the GC event, measured in different categories:</p>
<ul>
<li>user â€“ Total CPU time that was consumed by Garbage Collector threads during this collection</li>
<li>sys â€“ Time spent in OS calls or waiting for system event</li>
<li>real â€“ Clock time for which your application was stopped. As Serial Garbage Collector always uses just a single thread, real time is thus equal to the sum of user and system times.</li>
</ul>
</li>
</ol>
<p>å†…å­˜å˜åŒ–ï¼š</p>
<p>
        <div class="_showpic_4c84ff9b showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/serial-gc-in-old-gen-java.png class="_pic_4c84ff9b hidepic" picId="4c84ff9b"></img>
        <script>
            {
                let imgself4c84ff9bs = document.getElementsByClassName('_pic_4c84ff9b')
                let showpicbtn4c84ff9bs = document.getElementsByClassName('_showpic_4c84ff9b')
                let isInViewPortOfTwo4c84ff9b = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself4c84ff9bs[0].getBoundingClientRect() && imgself4c84ff9bs[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself4c84ff9bs) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo4c84ff9b)
                            isInViewPortOfTwo4c84ff9b = null
                        }
                        for (el of showpicbtn4c84ff9bs) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo4c84ff9b ()
                window.addEventListener('scroll', isInViewPortOfTwo4c84ff9b)
            }
        </script>
    </p>

          <h3 id="119acbb2">
            <a name="_root-Parallel GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Parallel GC
          </h3><p><strong>Parallel GC</strong>ä½¿ç”¨<a href="https://youyinnn.github.io/?to=post&amp;number=77#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%AE%97%E6%B3%95%E6%80%9D%E6%83%B3-2.%20Mark-Copy">æ ‡è®°-å¤åˆ¶</a>ç®—æ³•å›æ”¶å¹´è½»ä»£ï¼Œä½¿ç”¨<a href="">æ ‡è®°-æ•´ç†</a>ç®—æ³•å›æ”¶è€å¹´ä»£ï¼Œè¿™ç‚¹ä¸¤ä¸ªæ”¶é›†å™¨éƒ½ä¸€æ ·</p>
<p>å’Œå®ƒçš„åå­—ä¸€æ ·ï¼Œå¹¶è¡Œæ”¶é›†å™¨åœ¨è¿™ä¸¤ä¸ªåŒºåŸŸå¯ä»¥<strong>å¹¶è¡Œåœ°</strong>æ”¶é›†ï¼Œå¼€å§‹å·¥ä½œå‰ä¹Ÿä¼šè§¦å‘<strong>å¤§æš‚åœ</strong>ï¼Œè¯´å¹¶è¡Œæ˜¯æŒ‡å®ƒä¼šç”¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè¿™æ ·åšä¼šå¤§å¤§å‡å°‘å›æ”¶çš„è€—æ—¶</p>
<p>ç›¸å…³å‚æ•°ï¼š</p>
<ul>
<li><p>æŒ‡å®šå¤šçº¿ç¨‹æ”¶é›†ä½¿ç”¨çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤æ˜¯æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ•°</p>
<pre><code>  -XX:ParallelGCThreads=NNN</code></pre></li>
<li><p>æŒ‡å®šä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨</p>
<pre><code>  java -XX:+UseParallelGC com.mypackages.MyExecutableClass
  java -XX:+UseParallelOldGC com.mypackages.MyExecutableClass
  java -XX:+UseParallelGC -XX:+UseParallelOldGC com.mypackages.MyExecutableClass</code></pre></li>
</ul>
<p>å¦‚æœä½ æƒ³æé«˜ç³»ç»Ÿçš„ååé‡çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨å¤šæ ¸CPUçš„æœºå™¨ç¯å¢ƒä½¿ç”¨è¿™ä¸ªæ”¶é›†å™¨ï¼Œå®ƒèƒ½æ›´é«˜æ•ˆåœ°åˆ©ç”¨ç³»ç»Ÿçš„èµ„æºè¿›è¡Œå·¥ä½œï¼š</p>
<ul>
<li>å› ä¸ºå¿«é€Ÿçš„åŸå› ï¼Œ<strong>å¤§æš‚åœ</strong>çš„æ—¶é—´ä¹Ÿä¼šç¼©çŸ­ï¼›</li>
<li>åœ¨åƒåœ¾å›æ”¶æœŸé—´ï¼Œ<strong>æ”¶é›†å™¨éƒ½ä¸ä¼šæ¶ˆè´¹ä»»ä½•èµ„æºï¼ˆï¼Ÿï¼‰</strong>ï¼›</li>
</ul>
<p>ä½†æ˜¯å¦ä¸€æ–¹é¢æ¥è¯´ï¼Œæ‰€æœ‰çš„æ”¶é›†å™¨éƒ½å¿…é¡»åœ¨æ— æ‰“æ‰°çš„æƒ…å†µä¸‹å·¥ä½œï¼Œæ‰€ä»¥å®ƒä»¬éå¸¸å®¹æ˜“å—åˆ°é•¿æ—¶é—´æš‚åœçš„çº¿ç¨‹çš„å½±å“ï¼Œå¦‚æœä½ å¯¹å»¶è¿Ÿå¾ˆåœ¨æ„çš„è¯ï¼Œä½ å¯ä»¥ç»§ç»­çœ‹ä¸‹ä¸€ç»„åƒåœ¾æ”¶é›†</p>
<p><strong>GC logï¼š</strong></p>
<pre><code>2015-05-26T14:27:40.915-0200: 116.115: [GC (Allocation Failure) [PSYoungGen: 2694440K-&gt;1305132K(2796544K)] 9556775K-&gt;8438926K(11185152K), 0.2406675 secs] [Times: user=1.77 sys=0.01, real=0.24 secs]
2015-05-26T14:27:41.155-0200: 116.356: [Full GC (Ergonomics) [PSYoungGen: 1305132K-&gt;0K(2796544K)] [ParOldGen: 7133794K-&gt;6597672K(8388608K)] 8438926K-&gt;6597672K(11185152K), [Metaspace: 6745K-&gt;6745K(1056768K)], 0.9158801 secs] [Times: user=4.49 sys=0.64, real=0.92 secs]</code></pre><p><strong>Minor GCï¼š</strong></p>
<p>
        <div class="_showpic_f2b5d1ce showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/ParallelGC-in-Young-Generation-Java.png class="_pic_f2b5d1ce hidepic" picId="f2b5d1ce"></img>
        <script>
            {
                let imgselff2b5d1ces = document.getElementsByClassName('_pic_f2b5d1ce')
                let showpicbtnf2b5d1ces = document.getElementsByClassName('_showpic_f2b5d1ce')
                let isInViewPortOfTwof2b5d1ce = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselff2b5d1ces[0].getBoundingClientRect() && imgselff2b5d1ces[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselff2b5d1ces) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwof2b5d1ce)
                            isInViewPortOfTwof2b5d1ce = null
                        }
                        for (el of showpicbtnf2b5d1ces) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwof2b5d1ce ()
                window.addEventListener('scroll', isInViewPortOfTwof2b5d1ce)
            }
        </script>
    </p>
<p><strong>Full GCï¼š</strong></p>
<p>
        <div class="_showpic_3af028a3 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/Java-ParallelGC-in-Old-Generation.png class="_pic_3af028a3 hidepic" picId="3af028a3"></img>
        <script>
            {
                let imgself3af028a3s = document.getElementsByClassName('_pic_3af028a3')
                let showpicbtn3af028a3s = document.getElementsByClassName('_showpic_3af028a3')
                let isInViewPortOfTwo3af028a3 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself3af028a3s[0].getBoundingClientRect() && imgself3af028a3s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself3af028a3s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo3af028a3)
                            isInViewPortOfTwo3af028a3 = null
                        }
                        for (el of showpicbtn3af028a3s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo3af028a3 ()
                window.addEventListener('scroll', isInViewPortOfTwo3af028a3)
            }
        </script>
    </p>

          <h3 id="e7eecad9">
            <a name="_root-Concurrent Mark and Sweepï¼ˆCMSï¼‰" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Concurrent Mark and Sweepï¼ˆCMSï¼‰
          </h3><p>CMSæ”¶é›†å™¨çš„å®˜æ–¹åç§°æ˜¯â€œMostly Concurrent Mark and Sweep Garbage Collectorâ€ï¼Œå®ƒåœ¨å¹´è½»ä»£ä½¿ç”¨<strong>å¹¶è¡Œ</strong>æ”¶é›†å™¨ä¸€æ ·çš„è¡Œä¸ºï¼š<strong>å¤§æš‚åœã€å¹¶è¡Œã€æ ‡è®°-å¤åˆ¶</strong>ï¼Œç„¶ååœ¨è€å¹´ä»£åŒºä½¿ç”¨<strong>CMS</strong></p>
<p>è¿™ä¸ªç®—æ³•è¢«è®¾è®¡æˆç”¨äº<strong>é¿å…åœ¨å›æ”¶è€å¹´ä»£çš„æ—¶å€™æœ‰é•¿æš‚åœ</strong>ï¼Œå®ƒæœ‰ä¸¤ä¸ªå«ä¹‰ï¼š</p>
<ol>
<li>å®ƒå¹¶ä¸å¯¹è€å¹´ä»£è¿›è¡Œç´§å‡‘æ•´ç†ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ª<strong>&#39;free-lists&#39;</strong>æ¥ç®¡ç†å›æ”¶ç©ºé—´ï¼›</li>
<li>å®ƒä¸»è¦çš„å·¥ä½œæ˜¯åœ¨<strong>æ ‡è®°-å›æ”¶</strong>é˜¶æ®µç”¨<strong>é¢å¤–çš„çº¿ç¨‹</strong>å’Œåº”ç”¨ç¨‹åº<strong>å¹¶å‘åœ°è¿›è¡Œ</strong>ï¼Œè¿™æ„å‘³ç€åœ¨è¿™ä¸ªé˜¶æ®µå·¥ä½œçš„æ—¶å€™ï¼Œå®ƒä¸ä¼šè§¦å‘<strong>å¤§æš‚åœ</strong>ï¼Œå› æ­¤ï¼å®ƒä¼šå’Œç¨‹åºçš„çº¿ç¨‹ç«äº‰CPUæ—¶é—´ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹å®ƒèƒ½è°ƒç”¨çš„çº¿ç¨‹æ•°æ˜¯ç‰©ç†æ ¸å¿ƒçš„1/4ï¼›</li>
</ol>
<p>ä½ å¯ä»¥ç”¨ä¸‹é¢è¿™è¡Œå‚æ•°æ¥å¯åŠ¨å®ƒ</p>
<pre><code>java -XX:+UseConcMarkSweepGC com.mypackages.MyExecutableClass</code></pre><p>å¦‚æœä½ çš„ç›®çš„æ˜¯ä¸ºäº†å‡å°‘å»¶è¿Ÿçš„è¯ï¼Œé‚£ä¹ˆ<strong>CMS</strong>åœ¨å¤šæ ¸ç¯å¢ƒä¸‹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯ç”±äºå®ƒä¼šå ç”¨ç¨‹åºä¹‹å¤–çš„é¢å¤–èµ„æºï¼Œæ‰€ä»¥å®ƒä¼šå‰Šå¼±ç³»ç»Ÿçš„æ•´ä½“ååé‡</p>

          <h4 id="cd8ca102">
            <a name="_root-GC Log" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            GC Log
          </h4>
          <h5 id="ff499e68">
            <a name="_root-Minor GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Minor GC
          </h5><pre><code>2015-05-26T16:23:07.219-0200: 64.322: [GC (Allocation Failure) 64.322: [ParNew: 613404K-&gt;68068K(613440K), 0.1020465 secs] 10885349K-&gt;10880154K(12514816K), 0.1021309 secs] [Times: user=0.78 sys=0.01, real=0.11 secs]</code></pre><p>
        <div class="_showpic_f2b5d1ce showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/ParallelGC-in-Young-Generation-Java.png class="_pic_f2b5d1ce hidepic" picId="f2b5d1ce"></img>
        <script>
            {
                let imgselff2b5d1ces = document.getElementsByClassName('_pic_f2b5d1ce')
                let showpicbtnf2b5d1ces = document.getElementsByClassName('_showpic_f2b5d1ce')
                let isInViewPortOfTwof2b5d1ce = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselff2b5d1ces[0].getBoundingClientRect() && imgselff2b5d1ces[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselff2b5d1ces) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwof2b5d1ce)
                            isInViewPortOfTwof2b5d1ce = null
                        }
                        for (el of showpicbtnf2b5d1ces) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwof2b5d1ce ()
                window.addEventListener('scroll', isInViewPortOfTwof2b5d1ce)
            }
        </script>
    </p>

          <h5 id="4f74527c">
            <a name="_root-Full GC" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Full GC
          </h5><pre><code>2015-05-26T16:23:07.321-0200: 64.425: [GC (CMS Initial Mark) [1 CMS-initial-mark: 10812086K(11901376K)] 10887844K(12514816K), 0.0001997 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]
2015-05-26T16:23:07.321-0200: 64.425: [CMS-concurrent-mark-start]
2015-05-26T16:23:07.357-0200: 64.460: [CMS-concurrent-mark: 0.035/0.035 secs] [Times: user=0.07 sys=0.00, real=0.03 secs]
2015-05-26T16:23:07.357-0200: 64.460: [CMS-concurrent-preclean-start]
2015-05-26T16:23:07.373-0200: 64.476: [CMS-concurrent-preclean: 0.016/0.016 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
2015-05-26T16:23:07.373-0200: 64.476: [CMS-concurrent-abortable-preclean-start]
2015-05-26T16:23:08.446-0200: 65.550: [CMS-concurrent-abortable-preclean: 0.167/1.074 secs] [Times: user=0.20 sys=0.00, real=1.07 secs]
2015-05-26T16:23:08.447-0200: 65.550: [GC (CMS Final Remark) [YG occupancy: 387920 K (613440 K)]65.550: [Rescan (parallel) , 0.0085125 secs]65.559: [weak refs processing, 0.0000243 secs]65.559: [class unloading, 0.0013120 secs]65.560: [scrub symbol table, 0.0008345 secs]65.561: [scrub string table, 0.0001759 secs][1 CMS-remark: 10812086K(11901376K)] 11200006K(12514816K), 0.0110730 secs] [Times: user=0.06 sys=0.00, real=0.01 secs]
2015-05-26T16:23:08.458-0200: 65.561: [CMS-concurrent-sweep-start]
2015-05-26T16:23:08.485-0200: 65.588: [CMS-concurrent-sweep: 0.027/0.027 secs] [Times: user=0.03 sys=0.00, real=0.03 secs]
2015-05-26T16:23:08.485-0200: 65.589: [CMS-concurrent-reset-start]
2015-05-26T16:23:08.497-0200: 65.601: [CMS-concurrent-reset: 0.012/0.012 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]</code></pre><p>CMSçš„<strong>Full GC</strong>æœ‰ç‚¹è®²å¤´ï¼Œå®ƒåˆ†ä¸º7ä¸ªé˜¶æ®µ</p>

          <h6 id="bdda34ff">
            <a name="_root-Phase 1: Initial Mark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 1: Initial Mark
          </h6><p>è¿™é‡Œä¼šæœ‰CMSä¼šè§¦å‘çš„ä¸¤æ¬¡æš‚åœä¹‹ä¸€ï¼Œè¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ç›®æ ‡å°±æ˜¯å°†è€å¹´ä»£ä¸­çš„<strong>GC Root</strong>å’Œæœ‰<strong>è¢«å­˜æ´»å¹´è½»ä»£å¼•ç”¨</strong>çš„ï¼Œåé¢è¿™ä¸ªç›®æ ‡å¾ˆé‡è¦ï¼Œå› ä¸ºè€å¹´ä»£æ˜¯åˆ†ä»£æ”¶é›†çš„</p>
<p>
        <div class="_showpic_22ea304 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-06.png class="_pic_22ea304 hidepic" picId="22ea304"></img>
        <script>
            {
                let imgself22ea304s = document.getElementsByClassName('_pic_22ea304')
                let showpicbtn22ea304s = document.getElementsByClassName('_showpic_22ea304')
                let isInViewPortOfTwo22ea304 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself22ea304s[0].getBoundingClientRect() && imgself22ea304s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself22ea304s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo22ea304)
                            isInViewPortOfTwo22ea304 = null
                        }
                        for (el of showpicbtn22ea304s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo22ea304 ()
                window.addEventListener('scroll', isInViewPortOfTwo22ea304)
            }
        </script>
    </p>

          <h6 id="48f234a0">
            <a name="_root-Phase 2: Concurrent Mark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 2: Concurrent Mark
          </h6><p>åœ¨è¿™ä¸ªé˜¶æ®µé‡Œï¼ŒGCorä¼šéå†è€å¹´ä»£ç„¶å<strong>æ ‡è®°ä¸Šæ‰€æœ‰å­˜æ´»çš„å¯¹è±¡</strong>ï¼Œéå†è¿‡ç¨‹æ˜¯ä»ä¸Šä¸€ä¸ªé˜¶æ®µæ ‡è®°å¥½çš„<strong>GC Root</strong>å¼€å§‹ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šè§¦å‘å¤§æš‚åœï¼Œè€Œæ˜¯å’Œç¨‹åº<strong>å¹¶å‘åœ°</strong>è¿›è¡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„è€å¹´ä»£éƒ½ä¼šè¢«æ ‡è®°ï¼Œå› ä¸ºç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¼šæ”¹å˜ä¸€äº›å¼•ç”¨å…³ç³»</p>
<p>
        <div class="_showpic_3f4e8ab4 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-07.png class="_pic_3f4e8ab4 hidepic" picId="3f4e8ab4"></img>
        <script>
            {
                let imgself3f4e8ab4s = document.getElementsByClassName('_pic_3f4e8ab4')
                let showpicbtn3f4e8ab4s = document.getElementsByClassName('_showpic_3f4e8ab4')
                let isInViewPortOfTwo3f4e8ab4 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself3f4e8ab4s[0].getBoundingClientRect() && imgself3f4e8ab4s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself3f4e8ab4s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo3f4e8ab4)
                            isInViewPortOfTwo3f4e8ab4 = null
                        }
                        for (el of showpicbtn3f4e8ab4s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo3f4e8ab4 ()
                window.addEventListener('scroll', isInViewPortOfTwo3f4e8ab4)
            }
        </script>
    </p>

          <h6 id="68a83a23">
            <a name="_root-Phase 3: Concurrent Preclean" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 3: Concurrent Preclean
          </h6><p>è¿™ä¸ªé˜¶æ®µè¿˜æ˜¯å’Œåº”ç”¨ç¨‹åºå¹¶è¡Œçš„ã€‚è™½ç„¶åœ¨ä¸Šä¸€ä¸ªå¹¶å‘é˜¶æ®µé‡Œï¼Œæœ‰äº›å¼•ç”¨è¢«æ”¹å˜äº†ï¼Œæˆ‘ä»¬ç§°è¿™äº›å¯¹è±¡ä¸º<strong>â€œè„çš„ï¼ˆdirtyï¼‰â€</strong>ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µçš„è¯ï¼ŒJVMä¼šå°†åŒ…å«è¿™äº›è„å¯¹è±¡çš„å †åŒºåŸŸåˆ’å‡ºä¸€ä¸ªèŒƒå›´ï¼Œç§°ä¸º<strong>å¡ï¼ˆcardï¼‰</strong>ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°è¿‡çš„<a href="https://youyinnn.github.io/?to=post&amp;number=109#Object%20Generation-Eden">å¡æ ‡è®°ï¼ˆ<em>card-marking</em>ï¼‰</a></p>
<p>
        <div class="_showpic_bd1e1d65 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-08.png class="_pic_bd1e1d65 hidepic" picId="bd1e1d65"></img>
        <script>
            {
                let imgselfbd1e1d65s = document.getElementsByClassName('_pic_bd1e1d65')
                let showpicbtnbd1e1d65s = document.getElementsByClassName('_showpic_bd1e1d65')
                let isInViewPortOfTwobd1e1d65 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselfbd1e1d65s[0].getBoundingClientRect() && imgselfbd1e1d65s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselfbd1e1d65s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwobd1e1d65)
                            isInViewPortOfTwobd1e1d65 = null
                        }
                        for (el of showpicbtnbd1e1d65s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwobd1e1d65 ()
                window.addEventListener('scroll', isInViewPortOfTwobd1e1d65)
            }
        </script>
    </p>
<p>å¡æ ‡è®°æœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§åœ¨è„çŠ¶æ€ï¼Œä¸€ç§æ˜¯å¹²å‡€çŠ¶æ€ï¼Œæœ¬é˜¶æ®µéœ€è¦é’ˆå¯¹è„çŠ¶æ€çš„å¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œè„å¯¹è±¡è¢«è§†ä¸ºå ç”¨çŠ¶æ€ï¼Œç„¶å<strong>å°†å¡æ ‡è®°å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ä¹Ÿæ ‡è®°å¥½</strong>ï¼Œæ ‡è®°å¥½ä¹‹åï¼Œè„å¯¹è±¡å°±å˜ä¸ºå¹²å‡€å¯¹è±¡äº†</p>
<p>
        <div class="_showpic_807e34d5 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-09.png class="_pic_807e34d5 hidepic" picId="807e34d5"></img>
        <script>
            {
                let imgself807e34d5s = document.getElementsByClassName('_pic_807e34d5')
                let showpicbtn807e34d5s = document.getElementsByClassName('_showpic_807e34d5')
                let isInViewPortOfTwo807e34d5 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself807e34d5s[0].getBoundingClientRect() && imgself807e34d5s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself807e34d5s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo807e34d5)
                            isInViewPortOfTwo807e34d5 = null
                        }
                        for (el of showpicbtn807e34d5s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo807e34d5 ()
                window.addEventListener('scroll', isInViewPortOfTwo807e34d5)
            }
        </script>
    </p>
<p>é¢å¤–çš„ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä¸­è¿˜ä¼šè¿›è¡Œä¸€äº›å†…éƒ¨å¤„ç†ï¼Œä¸ºæœ€åçš„<strong>é‡æ ‡è®°ï¼ˆRemark Phaseï¼‰</strong>é˜¶æ®µåšå‡†å¤‡</p>

          <h6 id="a626b117">
            <a name="_root-Phase 4: Concurrent Abortable Preclean" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 4: Concurrent Abortable Preclean
          </h6><p>è¿™ä¸ªé˜¶æ®µè¿˜æ˜¯<strong>å¹¶å‘é˜¶æ®µ</strong>ï¼Œè¿™ä¸ªé˜¶æ®µçš„ç›®æ ‡æ˜¯å°½å¯èƒ½åœ°å‡å°‘æ•´ä¸ªå›æ”¶å·¥ä½œä¸­æœ€åä¸€æ¬¡å¤§æš‚åœçš„é‡æ ‡è®°é˜¶æ®µçš„å·¥ä½œé‡ï¼Œè¿™ä¸ªé˜¶æ®µæ‰€ç”¨çš„æ—¶é—´å–å†³äºå¾ˆå¤šå› ç´ ï¼Œå› ä¸ºå®ƒä»…ä»…åªæ˜¯è¿­ä»£åœ°å»åšåŒä¸€ä¸ªäº‹æƒ…ï¼Œä½†æ˜¯æ‰“æ–­å®ƒçš„è¿­ä»£çš„å› ç´ æœ‰å¾ˆå¤šç§</p>
<p>æ‰€ä»¥è¿™ä¸ªé˜¶æ®µå¯¹å³å°†åˆ°æ¥çš„å¤§æš‚åœé˜¶æ®µå½±å“éå¸¸å¤§ï¼Œè€Œä¸”è¿™ä¸ªé˜¶æ®µæœ‰å¾ˆå¤š<strong>é…ç½®é¡¹</strong>å’Œ<strong>å¤±è´¥æ¨¡å¼</strong></p>

          <h6 id="1b17f605">
            <a name="_root-Phase 5: Final Remark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 5: Final Remark
          </h6><p>è¿™ä¸ªé˜¶æ®µæ˜¯CMSåƒåœ¾å›æ”¶çš„ç¬¬äºŒä¸ª<strong>å¤§æš‚åœ</strong>é˜¶æ®µï¼Œç›®çš„æ˜¯ä¸ºäº†æœ€åä¸€æ¬¡å¯¹è€å¹´ä»£åŒºåŸŸè¿›è¡Œ<strong>å­˜æ´»æ ‡è®°</strong>ï¼Œè¿™æ˜¯ç”±äºPrecleané˜¶æ®µæ˜¯å¹¶å‘åœ°è¿›è¡Œçš„ï¼Œå®ƒå¯èƒ½è·Ÿä¸ä¸Šç¨‹åºæ”¹å˜å¼•ç”¨çš„é€Ÿåº¦ï¼Œæ‰€ä»¥è¿™æ¬¡å¤§æš‚åœå°±éœ€è¦è§£å†³è¿™ä¸ªè€ƒéªŒ</p>
<p>é€šå¸¸æ¥è¯´CMSä¼šè¯•ç€åœ¨<strong>å¹´è½»ä»£å°½å¯èƒ½ç©ºç€</strong>çš„æƒ…å†µä¸‹æ‰§è¡Œè¿™æ¬¡<strong>Final Remark</strong>ï¼Œç›®çš„æ˜¯æ¶ˆé™¤ä¸æ–­å‡ºç°å¤§æš‚åœçš„æƒ…å†µå‘ç”Ÿ</p>
<p>åœ¨5ä¸ªMarkingé˜¶æ®µä¹‹åï¼Œè€å¹´ä»£ä¸­çš„æ‰€æœ‰å­˜æ´»å¯¹è±¡éƒ½å·²ç»è¢«æ ‡è®°å¥½äº†ï¼Œè¿™æ—¶å€™GCorä»¬å°±ä¼šå¼€å§‹å¹²æ´»ï¼Œç”¨Sweepçš„æ–¹å¼<strong>æ¸…é™¤ï¼ˆreclaimï¼‰</strong>æ‰æ‰€æœ‰æ— ç”¨çš„å¯¹è±¡</p>

          <h6 id="32c46bf7">
            <a name="_root-Phase 6: Concurrent Sweep" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 6: Concurrent Sweep
          </h6><p>è¿™ä¸ªé˜¶æ®µå°±æ˜¯å’Œåº”ç”¨ç¨‹åºå¹¶å‘åœ°è¿›è¡Œï¼Œå°±æ˜¯è¦æ¸…ç†æ‰ä¸è¦çš„å¯¹è±¡</p>
<p>
        <div class="_showpic_46328501 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-10.png class="_pic_46328501 hidepic" picId="46328501"></img>
        <script>
            {
                let imgself46328501s = document.getElementsByClassName('_pic_46328501')
                let showpicbtn46328501s = document.getElementsByClassName('_showpic_46328501')
                let isInViewPortOfTwo46328501 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself46328501s[0].getBoundingClientRect() && imgself46328501s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself46328501s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo46328501)
                            isInViewPortOfTwo46328501 = null
                        }
                        for (el of showpicbtn46328501s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo46328501 ()
                window.addEventListener('scroll', isInViewPortOfTwo46328501)
            }
        </script>
    </p>

          <h6 id="97c18ab1">
            <a name="_root-Phase 7: Concurrent Reset" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 7: Concurrent Reset
          </h6><p>å’Œç¨‹åºå¹¶å‘åœ°è¿›è¡Œï¼Œç›®çš„æ˜¯ä¸ºäº†é‡ç½®CMSæ”¶é›†å™¨ä¸­è®°å½•çš„ä¸€äº›å†…éƒ¨æ•°æ®ï¼Œä¸ºä¸‹ä¸€æ¬¡CMSæ”¶é›†åšå‡†å¤‡</p>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒCMSæ”¶é›†å™¨èƒ½åˆ©ç”¨ç¨‹åºæš‚æ—¶ç”¨ä¸åˆ°çš„çº¿ç¨‹ï¼Œå’Œç¨‹åºå¹¶å‘åœ°è¿›è¡Œï¼Œå°½å¯èƒ½çš„å‡å°‘å¤§æš‚åœçš„æ—¶é•¿</p>
<p>è€Œåœ¨è¿™ä¸ªéœ€æ±‚ä¸Šï¼Œå®ƒå¾ˆå¥½åœ°å®Œæˆå®ƒäº†çš„å·¥ä½œ</p>
<p>ä½†æ˜¯å®ƒè¿˜æ˜¯æœ‰ä¸€å®šçš„ç¼ºç‚¹çš„ï¼Œå…¶ä¸­æœ€éœ€è¦æ³¨æ„çš„æ˜¯å®ƒä¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šé€ æˆè€å¹´ä»£çš„ç¢ç‰‡ç©ºé—´ï¼Œè€Œä¸”å®ƒè¿˜ç¼ºä¹å¯¹æš‚åœçš„é¢„æµ‹åˆ¤æ–­ï¼Œè¿™ç‚¹åœ¨å †æ¯”è¾ƒå¤§çš„æ—¶å€™ä¼šå¾ˆæ˜æ˜¾</p>

          <h3 id="c09c8a4d">
            <a name="_root-G1 â€“ Garbage First" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            G1 â€“ Garbage First
          </h3><p>ä½ ä¹Ÿè®¸å·²ç»æ³¨æ„åˆ°ï¼Œæœ€å¼€å§‹çš„é€ŸæŸ¥è¡¨ä¸­çš„G1å¹¶æ²¡æœ‰åŒºåˆ†è€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œè¿™æ˜¯æœ‰åŸå› çš„ï¼Œè€Œä¸æ˜¯ä½œè€…å¿˜äº†</p>
<p>G1æ”¶é›†å™¨æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç›®æ ‡å°±æ˜¯ï¼Œåˆ©ç”¨GCçš„å¯é…ç½®æ€§å’Œå¯é¢„æµ‹æ€§ï¼Œè®©å¤§æš‚åœå…·æœ‰<strong>æŒç»­ï¼ˆdurationï¼‰</strong>å’Œ<strong>åˆ†å¸ƒï¼ˆdistributionï¼‰</strong>çš„ç‰¹ç‚¹ï¼Œäº‹å®ä¸Šï¼Œ<strong>Garbage-First</strong>æ˜¯ä¸€ä¸ª<strong>è½¯å®æ—¶ï¼ˆ<em>soft real-time</em>ï¼‰</strong>çš„åƒåœ¾æ”¶é›†å™¨ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä¸ºå®ƒè®¾ç½®<strong>ç‰¹å®šçš„æ€§èƒ½ç›®æ ‡</strong>ï¼Œæ¯”å¦‚ä½ å¯ä»¥è®¾ç½®å¤§æš‚åœåœ¨å¤šå°‘æ¯«ç§’çš„æ—¶é—´èŒƒå›´å†…æ‰§è¡Œæ—¶é•¿ä¸è¶…è¿‡å¤šå°‘å¤šå°‘æ¯«ç§’ï¼ŒG1ä¼šå°½å®ƒçš„åŠªåŠ›å»è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼ˆæ‰€ä»¥ä¹Ÿä¸æ˜¯ç»å¯¹èƒ½æ»¡è¶³ä½ çš„è®¾ç½®ï¼Œè¿™å«åš<strong><em>hard real-time</em></strong>ï¼‰</p>
<p>ä¸ºäº†è¾¾åˆ°è¦è®¾ç½®çš„ç›®æ ‡ï¼ŒG1æ”¶é›†å™¨å»ºç«‹äº†ä¸€å¥—è‡ªå·±çš„æ¦‚å¿µï¼š</p>
<ol>
<li><p>å †å†…å­˜ä¸å¿…åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œè€Œæ˜¯åˆ†ä¸ºè‹¥å¹²ä¸ªï¼ˆä¸€èˆ¬å¯ä»¥æ˜¯2046ä¸ªï¼‰ç›¸åŒå¤§å°çš„å°åŒºåŸŸï¼ˆ<strong><em>regions</em></strong>ï¼‰ï¼Œè¿™äº›åŒºåŸŸç”¨æ¥å­˜æ”¾è‹¥å¹²ä¸ªå¯¹è±¡ï¼Œæ¯ä¸€ç§åŒºåŸŸåˆå¯ä»¥åˆ†ä¸ºï¼šEden Regionã€Survivor Regionã€Old Regionã€‚</p>
<p> å› ä¸ºä¸åŒç§ç±»çš„åŒºåŸŸä¹‹é—´å¹¶ä¸ç´§é åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥ç‰©ç†ä¸Šå®ƒä»¬ä¸éƒ½åœ¨ä¸€ä¸ªè¿ç»­çš„ç©ºé—´ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬é€»è¾‘ä¸Šç»„æˆå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œè¿™å’Œä¹‹å‰çš„æ¦‚å¿µä¸€è‡´ï¼Œåªä¸è¿‡å¹¶ä¸æ˜¯è¿ç»­åˆ’åˆ†ç©ºé—´äº†</p>
<p> 
        <div class="_showpic_15a68c85 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-011.png class="_pic_15a68c85 hidepic" picId="15a68c85"></img>
        <script>
            {
                let imgself15a68c85s = document.getElementsByClassName('_pic_15a68c85')
                let showpicbtn15a68c85s = document.getElementsByClassName('_showpic_15a68c85')
                let isInViewPortOfTwo15a68c85 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself15a68c85s[0].getBoundingClientRect() && imgself15a68c85s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself15a68c85s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo15a68c85)
                            isInViewPortOfTwo15a68c85 = null
                        }
                        for (el of showpicbtn15a68c85s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo15a68c85 ()
                window.addEventListener('scroll', isInViewPortOfTwo15a68c85)
            }
        </script>
    </p>
<p> è¿™èƒ½è®©GCorä»¬é¿å…æ¯æ¬¡éƒ½æ¸…ç†æ•´ç‰‡å †å†…å­˜ï¼Œåè€Œæ¯æ¬¡åªéœ€è¦æ¸…ç†ä¸€äº›è¢«è§†ä¸º<strong>å¾…å›æ”¶é›†åˆï¼ˆcollection setï¼‰</strong>çš„éƒ¨åˆ†åŒºåŸŸå°±è¡Œäº†ï¼Œæ¯æ¬¡å¤§æš‚åœçš„æ—¶å€™ï¼Œéƒ½ä¼šæ¸…ç†æ‰€æœ‰çš„å¹´è½»ä»£åŒºåŸŸï¼Œé¡ºå¸¦åŒ…æ‹¬ä¸€äº›è€å¹´ä»£åŒºåŸŸ</p>
<p> 
        <div class="_showpic_f7ae05c4 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2015/06/g1-02.png class="_pic_f7ae05c4 hidepic" picId="f7ae05c4"></img>
        <script>
            {
                let imgselff7ae05c4s = document.getElementsByClassName('_pic_f7ae05c4')
                let showpicbtnf7ae05c4s = document.getElementsByClassName('_showpic_f7ae05c4')
                let isInViewPortOfTwof7ae05c4 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgselff7ae05c4s[0].getBoundingClientRect() && imgselff7ae05c4s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgselff7ae05c4s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwof7ae05c4)
                            isInViewPortOfTwof7ae05c4 = null
                        }
                        for (el of showpicbtnf7ae05c4s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwof7ae05c4 ()
                window.addEventListener('scroll', isInViewPortOfTwof7ae05c4)
            }
        </script>
    </p>
</li>
<li><p>G1å¦å¤–ä¸€ä¸ªæ–°å¥‡çš„åœ°æ–¹å°±æ˜¯ï¼Œå®ƒä¼šå¯¹æ¯ä¸€ä¸ªåŒºåŸŸä¸­åŒ…å«çš„å­˜æ´»æ•°æ®è¿›è¡Œè¯„ä¼°ï¼Œç”¨äºå»ºç«‹èµ·<strong>å¾…å›æ”¶é›†åˆï¼ˆcollection setï¼‰</strong>ï¼ŒåŒ…å«è¶Šå¤šåƒåœ¾çš„åŒºåŸŸå°†ä¼šè¢«è¶Šå…ˆå¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯<strong>Garbage First</strong>åç§°çš„æ¥ç”±</p>
</li>
</ol>
<p>è¦ä½¿ç”¨G1æ”¶é›†å™¨ï¼Œå¯ä»¥åŒ…å«å‚æ•°ï¼š</p>
<pre><code>java -XX:+UseG1GC com.mypackages.MyExecutableClass</code></pre>
          <h4 id="42a9bf62">
            <a name="_root-Evacuation Pause: Full Young" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Evacuation Pause: Full Young
          </h4><p>åœ¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„æœ€å¼€å§‹ï¼ŒG1å¹¶æ²¡æœ‰ä¸ºè¿˜æœªè¢«æ‰§è¡Œçš„å¹¶å‘é˜¶æ®µé¢„ç½®ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œæ‰€ä»¥æœ€å¼€å§‹è¿™äº›åŒºåŸŸéƒ½æ˜¯<strong>çº¯å¹´è½»æ¨¡å¼ï¼ˆfully-young-modeï¼‰</strong></p>
<p>å½“å¹´è½»ä»£è¢«å¡«æ»¡çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºçº¿ç¨‹è¢«åœæ­¢äº†ï¼Œç„¶åå¹´è½»ä»£åŒºä¸­çš„å­˜æ´»å¯¹è±¡è¢«å¤åˆ¶åˆ°SurvivoråŒºï¼Œæˆ–è€…ä¸€ä¸ªæœªè¢«ä½¿ç”¨ä½†æ˜¯å³å°†ç§°ä¸ºServivoråŒºåŸŸçš„è‡ªç”±åŒºåŸŸ</p>
<p>è¿™ä¸ªè¿‡ç¨‹å«åš<strong>æ’¤ç¦»ï¼ˆEvacuationï¼‰</strong>ï¼Œç„¶åè¿™ä¸ªé˜¶æ®µçš„å·¥ä½œå°±å’Œå‰é¢ä»‹ç»è¿‡çš„ä¸€ç±»å¹´è½»ä»£æ”¶é›†å™¨å·®ä¸å¤ªå¤šï¼Œä½†æ˜¯æ•´ä¸ªæ’¤ç¦»é˜¶æ®µçš„logç›¸å½“å¤§<strong>ï¼ˆrather largeï¼‰</strong>ï¼Œ<a href="https://plumbr.io/handbook/garbage-collection-algorithms-implementations#evacuation-pause-fully-young">åŸæ–‡</a>æœ‰è¯¦ç»†çš„logåˆ†æï¼Œæˆ‘è¿™é‡Œå°±ä¸å±•å¼€äº†</p>

          <h4 id="14e6afd1">
            <a name="_root-Concurrent Marking" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Concurrent Marking
          </h4><p>G1æ”¶é›†å™¨æ˜¯åŸºäºå‰ä¸€èŠ‚çš„CMSæ”¶é›†å™¨çš„è®¸å¤šæ¦‚å¿µä¹‹ä¸Šçš„ï¼Œæ‰€ä»¥åœ¨ç»§ç»­å¾€ä¸‹äº†è§£ä¹‹å‰ä½ å¾—å¥½å¥½çœ‹ä¸€ä¸‹CMSåˆ°åº•æ˜¯å•¥ç©æ„ï¼Œè™½ç„¶åœ¨è¿™ä¸ªé˜¶æ®µG1æ”¶é›†å™¨è¿˜æ˜¯æœ‰ä¸€äº›å’ŒCMSä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒä»¬çš„ç›®æ ‡æ˜¯ä¸€è‡´çš„</p>
<p>G1çš„å¹¶å‘æ ‡è®°é˜¶æ®µä½¿ç”¨äº†ä¸€ç§å«åš<strong>â€œäº‹å‰å¿«ç…§ï¼ˆSnapshot-At-The-Beginningï¼‰â€</strong>çš„æ–¹å¼æ¥åœ¨æœ¬é˜¶æ®µå¼€å§‹ä¹‹å‰å°±æ ‡è®°å¥½æ‰€æœ‰çš„å¯¹è±¡ï¼Œå°½ç®¡å®ƒä»¬ä¸­æœ‰çš„ä¼šé©¬ä¸Šå˜ä¸ºåƒåœ¾ï¼Œé‚£ä¸ªå¯¹è±¡<strong>â€œæ˜¯å­˜æ´»çš„â€</strong>è¿™ä¸ªä¿¡æ¯ä¼šä»£è¡¨æ¯ä¸ªåŒºåŸŸçš„æ´»è·ƒåº¦ï¼Œè¿™ä¼šæé«˜ä¹‹ååˆ¤å®šå¾…å›æ”¶é›†çš„æ•ˆç‡</p>
<p>ä¹‹åè¿™ä¸ªä¿¡æ¯è¢«ç”¨äºåœ¨è€å¹´ä»£è¿›è¡ŒGCï¼š</p>
<ul>
<li>å¦‚æœä¸€ä¸ªåŒºåŸŸä¸­å…¨éƒ¨éƒ½æ˜¯åƒåœ¾ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å®Œå…¨å’Œç¨‹åºå¹¶å‘è¿›è¡Œ</li>
<li>å¦‚æœä¸€ä¸ªåŒºåŸŸä¸­æ—¢æœ‰åƒåœ¾åˆæœ‰å­˜æ´»å¯¹è±¡ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨è€å¹´ä»£åŒºçš„æ’¤ç¦»æš‚åœä¸­è¿›è¡Œ</li>
</ul>
<p>G1çš„å¹¶å‘æ ‡è®°è¿‡ç¨‹çš„è§¦å‘æ—¶æœºæ˜¯å †åŒºåŸŸæ•´ä½“è¢«å ç”¨è¶³å¤Ÿå¤§çš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯45%ï¼Œä½†ä½ å¯ä»¥ç”¨JVMå‚æ•°è°ƒå®ƒ</p>
<p>å’ŒCMSä¸€æ ·ï¼ŒG1çš„å¹¶å‘æ ‡è®°è¿‡ç¨‹æœ‰å¥½å‡ ä¸ªé˜¶æ®µå®ƒä»¬ä¹‹ä¸­æœ‰äº›å¯ä»¥å¹¶å‘è¿›è¡Œï¼Œæœ‰äº›åˆ™éœ€è¦å¤§æš‚åœ</p>

          <h5 id="24d36545">
            <a name="_root-Phase 1: Initial Mark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 1: Initial Mark
          </h5><p>è¿™ä¸ªé˜¶æ®µä¼šæ ‡è®°æ‰€æœ‰<strong>GC Root</strong>èƒ½å¤Ÿæ‘¸åˆ°çš„å¯¹è±¡ï¼Œå’ŒCMSä¸åŒçš„æ˜¯ï¼ŒCMSéœ€è¦é¢å¤–æ¥ä¸€æ¬¡å¤§æš‚åœï¼Œä½†æ˜¯G1çš„è¿™ä¸ªé˜¶æ®µæ˜¯æå¸¦åœ¨æ’¤ç¦»æš‚åœä¹‹åçš„ï¼Œæ‰€ä»¥å®ƒçš„å¼€é”€éå¸¸å°</p>

          <h5 id="5eafe065">
            <a name="_root-Phase 2: Root Region Scan" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 2: Root Region Scan
          </h5><p>è¿™ä¸ªé˜¶æ®µä¼šæ ‡è®°æ‰€æœ‰ä»<strong>Root Region</strong>èƒ½reachåˆ°çš„å­˜æ´»å¯¹è±¡ï¼Œæ¯”å¦‚è¯´ä¸€äº›éç©ºçš„åŒºåŸŸï¼Œæˆ‘ä»¬å¿…é¡»å¾—åœ¨æ ‡è®°ç¯èŠ‚çš„ä¸­æœŸå°±è¿›è¡Œæ”¶é›†ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬åœ¨åé¢çš„<strong>å¹¶å‘æ ‡è®°</strong>é˜¶æ®µçš„æ—¶å€™è¿›è¡Œå¯¹è±¡ç§»åŠ¨çš„è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¸€äº›ä¸å¯æ§çš„é—®é¢˜ï¼Œæ‰€ä»¥è¿™ä¸ªé˜¶æ®µä¼šåœ¨ä¸‹ä¸€æ¬¡æ’¤ç¦»æš‚åœå¼€å§‹ä¹‹å‰å®Œæˆï¼Œå¦‚æœæ’¤ç¦»æš‚åœå¾—æå‰å¼€å§‹çš„è¯ï¼Œå®ƒä¼šæå‰ç»ˆæ­¢æ­£åœ¨è¿›è¡Œçš„<strong>Root Region Scan</strong>ï¼Œç„¶åç­‰è¿™æ¬¡æ’¤ç¦»æš‚åœç»“æŸ</p>
<p>åœ¨ç°åœ¨çš„å®ç°ä¸­ï¼ŒRoot Regionæ˜¯SurvivoråŒºï¼Œå®ƒä»¬å±äºå¹´è½»ä»£åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”ä¸‹æ¬¡æ’¤ç¦»æš‚åœä¸­<strong>ä¸€å®šä¼šè¢«å›æ”¶</strong></p>

          <h5 id="619e542">
            <a name="_root-Phase 3: Concurrent Mark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 3: Concurrent Mark
          </h5><p>è¿™ä¸ªé˜¶æ®µå’ŒCMSä¸­çš„éå¸¸ç›¸ä¼¼ï¼Œå®ƒä»…ä»…æ˜¯ç®€å•åœ°è¿‡ä¸€éå¯¹è±¡å›¾ï¼Œç„¶ååœ¨ä¸€ä¸ªä¸“é—¨çš„æ¯”ç‰¹å›¾ä¸­æ ‡è®°ä¸Šå¿…è¦çš„å¯¹è±¡</p>
<p>ä¸ºäº†ä¿è¯<strong>â€œäº‹å‰å¿«ç…§ï¼ˆSnapshot-At-The-Beginningï¼‰â€</strong>çš„å‡ºç°ï¼ŒG1 GCè¦æ±‚å¯¹å¯¹è±¡å›¾çš„å¹¶å‘æ›´æ–°å¾—æ˜¯åº”ç”¨ç¨‹åºçš„çº¿ç¨‹æ¥æ–­å¼€å¼•ç”¨çš„æ—¶å€™æ‰æœ‰æ•ˆ</p>
<p>è¦å®Œæˆè¿™ä¸ªäº‹æƒ…ï¼Œè¿˜æ˜¯è¦æœ‰ä¸€ä¸ª<strong>é¢„å†™å±éšœï¼ˆpre-wirte barriersï¼‰</strong>,å®ƒçš„åŠŸèƒ½åœ¨äºæ— è®ºä»€ä¹ˆæ—¶å€™ä½ è¦å†™ä¸€ä¸ªæ•°æ®ï¼Œåªè¦å¹¶å‘æ ‡è®°å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œå®ƒéƒ½ä¼šå­˜å‚¨ä¹‹å‰çš„å¼•ç”¨å…³ç³»åœ¨ä¸€ä¸ªäº¤æ—¥å¿—æµçš„åœ°æ–¹</p>

          <h5 id="2321654b">
            <a name="_root-Phase 4: Remark" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 4: Remark
          </h5><p>è¿™ä¸ªä¹‹å‰çš„CMSçš„å¤§æš‚åœä¸€æ ·ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µæœ€ç»ˆå®Œæˆæ ‡è®°å·¥ä½œ</p>
<p>è€Œå¯¹äºG1æ¥è¯´ï¼Œå®ƒä¼šçŸ­æš‚åœ°åœæ­¢åº”ç”¨ç¨‹åºçº¿ç¨‹å’Œåœæ­¢å¹¶å‘æ›´æ–°æ—¥å¿—æµï¼Œå¹¶ä¸”åšå®Œæ—¥å¿—æµå‰©ä½™çš„å·¥ä½œï¼Œç„¶åæ ‡è®°å®Œå‰©ä¸‹çš„æ²¡æœ‰è¢«æ ‡è®°çš„å­˜æ´»å¯¹è±¡</p>
<p>è¿™ä¸ªé˜¶æ®µä¹Ÿä¼šæ‰§è¡Œä¸€äº›å¯é€‰çš„æ¸…ç†å›æ”¶å·¥ä½œï¼Œæ¯”å¦‚å¼•ç”¨çš„å¤„ç†å’Œç±»çš„å¸è½½</p>

          <h5 id="ecb16605">
            <a name="_root-Phase 5: Cleanup" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Phase 5: Cleanup
          </h5><p>æœ€åä¸€ä¸ªé˜¶æ®µä¸ºå³å°†åˆ°æ¥çš„æ’¤ç¦»æš‚åœåšå‡†å¤‡ï¼Œå¯¹å †å†…å­˜ä¸­æ‰€æœ‰çš„å­˜æ´»å¯¹è±¡è¿›è¡Œè®¡æ•°ï¼Œå¹¶ä¸”å°†è¿™äº›åŒºåŸŸæŒ‰ç…§æœŸæœ›çš„GCæ•ˆç‡é«˜ä½è¿›è¡Œæ’åºï¼Œå®ƒè¿˜ä¼šåšä¸€äº›å†…éƒ¨å·¥ä½œæ¯”å¦‚æ ‡è®°ä¸€äº›å†…éƒ¨çŠ¶æ€ï¼Œä¸ºäº†ä¸‹ä¸€æ¬¡çš„å¹¶å‘æ ‡è®°åšå‡†å¤‡</p>
<p>æœ€åå†æä¸€ç‚¹ï¼ŒåŒ…å«éå­˜æ´»å¯¹è±¡çš„åŒºåŸŸåœ¨è¿™ä¸ªé˜¶æ®µéƒ½ä¼šè¢«æ¸…ç†æ‰ï¼Œä½†æ˜¯è¿™ä¸ªé˜¶æ®µä¸­æœ‰äº›éƒ¨åˆ†æ˜¯å¹¶å‘çš„æ¯”å¦‚è¯´å›æ”¶ä¸€äº›ç©ºåŒºåŸŸå’Œä¸€äº›æ´»è·ƒåº¦æ¯”è¾ƒé«˜çš„åŒºåŸŸï¼›ä¹Ÿä¼šæœ‰è¦æ±‚å¤§æš‚åœçš„åŒºåŸŸ</p>

          <h4 id="2d481a2e">
            <a name="_root-Evacuation Pause: Mixd" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Evacuation Pause: Mixd
          </h4><p>ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½åœ¨å¹¶å‘Cleanupé˜¶æ®µå°±å·²ç»æŠŠè€å¹´ä»£åŒºåŸŸå¯¹è±¡éƒ½æ¸…ç†æ‰äº†ï¼Œä½†ä¹Ÿä¸ä¼š100%éƒ½è¿™æ ·</p>
<p>åœ¨å¹¶å‘æ ‡è®°å®Œå…¨å®Œæˆçš„æ—¶å€™ï¼ŒG1æ”¶é›†å™¨ä¼šå®‰æ’ä¸€æ¬¡<strong>æ··åˆæ”¶é›†ï¼ˆmix collectionï¼‰</strong>ï¼Œå®ƒä¸ä»…æ”¶é›†å¹´è½»ä»£çš„åƒåœ¾ï¼Œå®ƒè¿˜æ”¶é›†è€å¹´ä»£çš„åƒåœ¾</p>
<p>ä¸€æ¬¡é’ˆå¯¹ä¸¤ä¸ªåŒºåŸŸçš„æ’¤ç¦»æš‚åœå¹¶ä¸æ€»æ˜¯é©¬ä¸Šå°±åœ¨å¹¶å‘æ ‡è®°å®Œæˆä¹‹åå°±å¼€å§‹ï¼Œè€Œæ˜¯æœ‰ä¸€å®šçš„è§„åˆ™çš„ï¼Œæ¯”å¦‚è¯´å¦‚æœè¿™æ—¶å€™æœ‰å¯èƒ½ä¸€æ¬¡æ€§å°±æ¸…ç†æ‰å¤§éƒ¨åˆ†çš„è€å¹´åŒºä¸­çš„å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥è§¦å‘è¿™ä¸ª</p>
<p>æ‰€ä»¥åœ¨å¹¶å‘æ ‡è®°å’Œæ··åˆæ’¤ç¦»æš‚åœä¹‹é—´ï¼Œå¾ˆå¯èƒ½ä¼šæœ‰ä¸€æ¬¡é’ˆå¯¹å¹´è½»ä»£çš„æ’¤ç¦»æš‚åœ</p>
<p>éœ€è¦è¢«åŠ å…¥åˆ°å›æ”¶é›†åˆçš„è€å¹´ä»£å¯¹è±¡çš„å‡†ç¡®æ•°é‡ï¼Œä»¥åŠå®ƒä»¬è¢«æ·»åŠ çš„å‡†ç¡®é¡ºåºï¼Œä¹Ÿéƒ½æ˜¯æ ¹æ®é€‰å¥½çš„è§„åˆ™æ¥å®šçš„ï¼Œè¿™äº›è§„åˆ™æ­£æ˜¯<strong>è½¯å®æ—¶ï¼ˆ<em>soft real-time</em>ï¼‰</strong>æœºåˆ¶ä¸ºç¨‹åºå®šåˆ¶çš„ç›®æ ‡ï¼Œæ¯”å¦‚æ´»è·ƒåº¦ã€å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­åˆ¤å®šä¸ºæœ‰æ•ˆGCçš„åœ°æ–¹è¿˜æœ‰ä¸€äº›JVMçš„é…ç½®æŒ‡æ ‡ã€‚æ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å’Œé’ˆå¯¹å¹´è½»ä»£çš„æ’¤ç¦»æš‚åœè¿‡ç¨‹æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯å®ƒè¿˜åŒ…æ‹¬è€å¹´ä»£</p>
<p><strong>è®°å¿†é›†åˆï¼ˆRemembered setï¼‰</strong>æ˜¯å…è®¸æ¥è‡ªä¸åŒå †åŒºåŸŸçš„å„è‡ªçš„å›æ”¶ç»“æœï¼Œæ¯”å¦‚è¯´ï¼šå½“å›æ”¶é›†åˆä¸­çš„å¯¹è±¡æœ‰æ¥è‡ªAã€Bã€Cä¸‰ä¸ªåŒºåŸŸçš„ï¼Œäºæ˜¯æˆ‘ä»¬å¿…é¡»çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯å¦æœ‰å¼•ç”¨åˆ°Då’ŒEåŒºåŸŸä¸­çš„å¯¹è±¡ï¼Œå¹¶ä»¥æ­¤æ¥åˆ¤æ–­å®ƒä»¬çš„æ´»è·ƒåº¦</p>
<p>ä½†å¦‚æœéå†æ•´ä¸ªå †åŒºåŸŸçš„è¯ï¼Œä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿä¼šæ¯æ‰æˆ‘ä»¬è®¾ç½®å›æ”¶é›†åˆçš„æ„ä¹‰ï¼Œäºæ˜¯JVMé‡‡ç”¨äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå’Œä¹‹å‰è¯´è¿‡çš„<strong>å¡åŒºåŸŸï¼ˆcard-tableï¼‰</strong>æœ‰ç‚¹ç±»ä¼¼ï¼Œæ‰€ä»¥åœ¨G1é‡Œé¢å’Œå®ƒå¯¹åº”çš„å°±æ˜¯<strong>è®°å¿†é›†åˆï¼ˆRemembered setï¼‰</strong></p>
<p>å’Œä¸‹å›¾å±•ç¤ºçš„ä¸€æ ·ï¼šæ¯ä¸ªåŒºåŸŸéƒ½æœ‰ä¸€ä¸ªåˆ—å‡º<strong>æŒ‡å‘è¿™ä¸ªåŒºåŸŸçš„å¼•ç”¨</strong>çš„åˆ—è¡¨ä½œä¸ºè®°å¿†é›†åˆåœ¨æ—è¾¹ï¼Œè¿™äº›å¼•ç”¨ä¼šè¢«è®¤ä¸ºæ˜¯å¯é€‰çš„<strong>GC Root</strong>ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¹¶å‘æ ‡è®°é˜¶æ®µè¢«è§†ä¸ºåƒåœ¾çš„è€å¹´åŒºå¯¹è±¡ä¸ä¼šè¢«åˆ—å…¥è¿™ä¸ªè®°å¿†é›†åˆä¸­ï¼Œå³ä½¿æœ‰å¤–éƒ¨å¼•ç”¨æŒ‡å‘å®ƒä»¬ï¼Œå› ä¸ºåœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œè¿™äº›å¤–éƒ¨å¼•ç”¨ä¹Ÿå·²ç»è¢«æ ‡è®°ä¸ºåƒåœ¾äº†</p>
<p>
        <div class="_showpic_9f941c2c showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2016/01/g1-03.png class="_pic_9f941c2c hidepic" picId="9f941c2c"></img>
        <script>
            {
                let imgself9f941c2cs = document.getElementsByClassName('_pic_9f941c2c')
                let showpicbtn9f941c2cs = document.getElementsByClassName('_showpic_9f941c2c')
                let isInViewPortOfTwo9f941c2c = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself9f941c2cs[0].getBoundingClientRect() && imgself9f941c2cs[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself9f941c2cs) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo9f941c2c)
                            isInViewPortOfTwo9f941c2c = null
                        }
                        for (el of showpicbtn9f941c2cs) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo9f941c2c ()
                window.addEventListener('scroll', isInViewPortOfTwo9f941c2c)
            }
        </script>
    </p>
<p>æ¥ä¸‹æ¥å‘ç”Ÿçš„äº‹æƒ…å°±æ¯”è¾ƒç®€å•äº†ï¼šGCorä»¬å†³å®šå“ªäº›å¯¹è±¡æ˜¯å­˜æ´»çš„ï¼Œå“ªäº›å¯¹è±¡æ˜¯åƒåœ¾</p>
<p>
        <div class="_showpic_2db4c03c showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2016/01/g1-04.png class="_pic_2db4c03c hidepic" picId="2db4c03c"></img>
        <script>
            {
                let imgself2db4c03cs = document.getElementsByClassName('_pic_2db4c03c')
                let showpicbtn2db4c03cs = document.getElementsByClassName('_showpic_2db4c03c')
                let isInViewPortOfTwo2db4c03c = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself2db4c03cs[0].getBoundingClientRect() && imgself2db4c03cs[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself2db4c03cs) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo2db4c03c)
                            isInViewPortOfTwo2db4c03c = null
                        }
                        for (el of showpicbtn2db4c03cs) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo2db4c03c ()
                window.addEventListener('scroll', isInViewPortOfTwo2db4c03c)
            }
        </script>
    </p>
<p>æœ€åï¼Œå­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«ç§»åŠ¨åˆ°survivoråŒºåŸŸï¼Œæ¸…ç©ºå‡ºæ¥çš„æ–°åŒºåŸŸåˆä¼šé‡æ–°æŠ•å…¥ä¸€äº›å¯¹è±¡è¿›å»</p>
<p>
        <div class="_showpic_997b73f1 showpicbtn">Loading images >></div>
        <img href=https://plumbr.io/app/uploads/2016/01/g1-05-v2.png class="_pic_997b73f1 hidepic" picId="997b73f1"></img>
        <script>
            {
                let imgself997b73f1s = document.getElementsByClassName('_pic_997b73f1')
                let showpicbtn997b73f1s = document.getElementsByClassName('_showpic_997b73f1')
                let isInViewPortOfTwo997b73f1 = function () {
                    const viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight 
                    const top = imgself997b73f1s[0].getBoundingClientRect() && imgself997b73f1s[0].getBoundingClientRect().top
                    if (top  <= viewPortHeight + 300) {
                        for (el of imgself997b73f1s) {
                            el.src = el.getAttribute('href')
                            el.classList.add('showpic')
                            window.removeEventListener('scroll', isInViewPortOfTwo997b73f1)
                            isInViewPortOfTwo997b73f1 = null
                        }
                        for (el of showpicbtn997b73f1s) {
                            el.style.display = 'none'
                        }
                    }
                }
                isInViewPortOfTwo997b73f1 ()
                window.addEventListener('scroll', isInViewPortOfTwo997b73f1)
            }
        </script>
    </p>
<p>ä¸ºäº†ç»´æŠ¤ä¸€ä¸ªè®°å¿†é›†åˆï¼Œ<strong>åå†™å±éšœï¼ˆpost-write barrierï¼‰</strong>ä¼šåœ¨ä¸€ä¸ªæ•°æ®è¢«å†™å…¥çš„æ—¶å€™å‡ºç°ã€‚å¦‚æœä¸€ä¸ªè·¨åŒºåŸŸå¼•ç”¨å…³ç³»å‡ºç°äº†ï¼Œæœ‰å…³ç³»çš„å¼•ç”¨ä¹‹é—´ä¼šè¢«è®°å½•åœ¨å„è‡ªçš„è®°å¿†é›†åˆä¸­ã€‚ä¸ºäº†å‡å°‘è¿™ä¸ªå†™å±éšœçš„å¼€é”€ï¼Œæ”¾ç½®è®°å½•åœ¨è®°å¿†é›†åˆä¸­çš„è¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”è¿˜æœ‰å…¶ä»–çš„ä¼˜åŒ–åŠŸèƒ½</p>
<p>ä½†å½’ç»“èµ·æ¥å°±æ˜¯å†™å±éšœä¼šåœ¨å†™æ•°æ®çš„æ—¶å€™å¾€æœ¬åœ°ç¼“å­˜ä¸­æ”¾ç½®ä¸€ä¸ª<strong>è„å¡ï¼ˆdirty cardï¼‰</strong>ï¼Œè„å¡çš„æ¦‚å¿µå¯ä»¥ç»“åˆä¹‹å‰è¯´çš„ï¼Œç„¶åç‰¹å®šçš„GCçº¿ç¨‹ä¼šæ‰¾åˆ°è¿™ä¸ªå¡ç„¶åå°†ä¹‹è®°å½•åœ¨ç›¸å…³çš„è®°å¿†é›†åˆä¸­</p>

          <h4 id="deb561ea">
            <a name="_root-Summary" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Summary
          </h4><p>æˆ‘ä»¬åº”è¯¥ç»™å‡ºä¸€ä¸ªå……åˆ†åˆåŸºæœ¬çš„è®¤è¯†ç»™G1ï¼Œè™½ç„¶è¿˜æœ‰å¾ˆå¤šç»†èŠ‚æ²¡æœ‰æåˆ°è¿‡æ¯”å¦‚å¯¹<a href="https://plumbr.io/handbook/gc-tuning-in-practice#humongous-allocations">å¤§é‡å †ç§¯çš„å¯¹è±¡</a>çš„å¤„ç†ï¼Œä½†æ˜¯æ€»å’Œæ‰€æœ‰ä¸œè¥¿è€Œè¨€ï¼ŒG1æ˜¯<strong>HotSpot</strong>é‡Œéå¸¸æœ‰æŠ€æœ¯å«é‡çš„å¹¶ä¸”å……åˆ†ä¸ºç”Ÿäº§ç¯å¢ƒè€Œå‡†å¤‡çš„æ”¶é›†å™¨ï¼Œåœ¨è¿™ä¹‹ä¸­ï¼Œè¿˜æ˜¯å½’åŠŸäºHotSpotå·¥ç¨‹å¸ˆä»¬å¯¹å®ƒä¸ç•™é¢å­åœ°è¿›è¡Œæ— æƒ…ä¼˜åŒ–ï¼Œä¸ºäº†è®©æ–°ç‰ˆæœ¬çš„Javaä¸è‡³äºä¸€ä¸¶ä¸œè¥¿éƒ½æ‹¿ä¸å‡ºæ‰‹</p>
<p>çœ‹äº†è¿™ä¹ˆå¤šä¸‹æ¥æˆ‘ä»¬å‘ç°ï¼ŒG1è§£å†³äº†CMSçš„å¤§éƒ¨åˆ†é—®é¢˜ï¼Œä»æš‚åœå¯é¢„æµ‹æ€§å¼€å§‹åˆ°å †å†…å­˜çš„ç¢ç‰‡ï¼Œå®ƒè®©ç”¨æˆ·ä¸å†å—CPUç»„åˆçš„é™åˆ¶ï¼Œè™½ç„¶å®ƒå¯¹ä¸€äº›ç‰¹å®šæ“ä½œçš„å»¶è¿Ÿéå¸¸æ•æ„Ÿï¼Œä½†è¿™å¹¶ä¸å¦¨ç¢å®ƒç§°ä¸ºHotSpotç”¨æˆ·æœ€å¥½çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯æ›´æ–°ç‰ˆæœ¬çš„Javaç”¨æˆ·</p>
<p>ç„¶è€Œè¿™äº›é’ˆå¯¹å»¶è¿Ÿè€Œè¿›è¡Œçš„ä¼˜åŒ–è¿˜æ˜¯éœ€è¦ç›¸åº”ä»£ä»·çš„ï¼ŒG1çš„å†™å±éšœå¯¹ååé‡å¼€é”€æ¥è¯´æ˜¯ä¸€ä¸ªå¤§å¤´ï¼Œå®ƒè¿˜ä¼šå¢åŠ æ›´å¤šçš„åå°çº¿ç¨‹ï¼Œæ‰€ä»¥å¦‚æœç¨‹åºä¸»è¦æ˜¯åšååé‡å·¥ä½œçš„æˆ–è€…100%åƒæ»¡CPUæ€§èƒ½çš„å¹¶ä¸”å®Œå…¨ä¸å…³å¿ƒå»¶è¿Ÿçš„è¯ï¼Œè¿˜æ˜¯é€‰æ‹©CMSæ›´å¥½ä¸€ç‚¹</p>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

</body>

</html>