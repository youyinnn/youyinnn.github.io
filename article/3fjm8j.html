<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="baidu-site-verification" content="l09YSIpJQW" />
    <meta name="referrer" content="origin">
    <title>blog | youyinnn</title>
    <link rel="bookmark" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/youyinnn/youyinnn.github.io@master/img/favicon.ico" />
    <link rel="stylesheet" href="/mycss/style.css">

    <script src="/resources/resources.js"></script>
    <script src="/myjs/import.js"></script>
    <script>
        importJsBeforeLoad()
    </script>
</head>

<body>

    <ol id="topbar" class="breadcrumb unselectable new_font">
        <p style="color:rgb(214, 214, 214); padding-right: 1rem;">
            <button id="egg" class="egg em-svg em-rocket"></button>&nbsp;&nbsp;&nbsp;&nbsp;&gt;</p>
        <li class="breadcrumb-item">
            <spen id="homebut" href="javaScript:void(0)" class="ah">-home</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="articlesbut" href="javaScript:void(0)" class="ah">-articles</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="scriptbut" href="javaScript:void(0)" class="ah">-scripts</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="todobut" href="javaScript:void(0)" class="ah">-todos</spen>
        </li>
        <li class="breadcrumb-item">
            <spen id="resumebut" href="javaScript:void(0)" class="ah">-resume</spen>
        </li>
        <li class="breadcrumb-item dropdown">
            <spen href="javaScript:void(0)" class="ah" role="button" id="friendlinkedbut" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-friends</spen>
            <div id="fldd" class="dropdown-menu" aria-labelledby="friendlinkedbut" style="border-radius: initial;"></div>
        </li>

        <div id="hb" data-toggle="tooltip" data-placement="bottom" title="show/hide TopBar">

        </div>
    </ol>

    <div id="homepage" class="unselectable new_font myhide">
        <span id="slogan">
            <i id="wolf-logo" class="em-svg em-new_moon mr-4"></i>I'M BACK
        </span>
        <div id="showmore"> &gt; About Me & This Blog</div>
        <div id="showhacknical"> &gt; My Github Analysis</div>
        <div id="toarticles"> &gt; My Tech Articles</div>
        <div id="ifwrapper" class="hacknical_hide">
            <iframe id="hacknical_github_analysis" frameborder="0"></iframe>
        </div>
    </div>

    <div id="series" class="unselectable">
        <span>系</span>
        <span>列</span>
        <span>文</span>
        <span>章</span>
    </div>
    <div id="seriesbox" class="unselectable">

    </div>

    <div id="articles_side_panel" class="unselectable myhide new_font">
        <div id="cates_tree_head">Article Categories</div>
        <div id="cates_tree_body"></div>
        <div id="blog_statistic_head">Blog Statistic</div>
        <table id="blog_statistic_body" class="myhide">
            <tbody>
                <tr>
                    <td style="text-align:right">Site running days:</td>
                    <td style="text-align:left" id="stat_running"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Total article:</td>
                    <td style="text-align:left" id="stat_article_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Char count:</td>
                    <td style="text-align:left" id="stat_typein"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Category count:</td>
                    <td style="text-align:left" id="stat_cate_count"></td>
                </tr>
                <tr>
                    <td style="text-align:right">Tag count:</td>
                    <td style="text-align:left" id="stat_tag_count"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="docpanel" class="myhide new_font">
        <div id="articlesearch" class="input-group">
            <input id="articlesearchtext" type="text" class="form-control" autocomplete="off" placeholder="search">
            <div class="input-group-append">
                <button id="cleanbut" class="btn btn-dark" type="button" title="clear search">cls</button>
                <button id="categories" class="btn btn-dark" type="button">cates</button>
                <button id="tags" class="btn btn-dark" type="button" title="all tags">tags</button>
                <button id="articlesearchbut" class="btn btn-dark" type="button" title="search">sch</button>
            </div>
        </div>
        <div class="tgs myhide" id="all_cates">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All categories:</span>
            <br>
        </div>
        <div class="tgs myhide" id="all_tags">
            <span style="font-size: 1rem; font-weight: bold ; padding: 6px;">All tags:</span>
            <br>
        </div>
    </div>

    <div id="sidetoccontainer" class="tochide unselectable new_font">
        <div id="block">
            <div id="percent" data-toggle="tooltip" data-placement="bottom" title="return to the top">0%</div>
        </div>
        <div id="sidetoc" class="unselectable markdown-body editormd-preview-container"></div>
    </div>
    <div id="md" class="myhide markdown-body editormd-html-preview">
        <p>{% cq %}</p>
<p>Filters：过滤你的日志信息</p>
<p>{% endcq %}</p>
<!-- more -->


          <h3>
            <a name="_root-重要概念" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            重要概念
          </h3>
          <h4>
            <a name="_root-枚举值" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            枚举值
          </h4><p>Filters可以用来对日志事件进行过滤，过滤器会返回一个枚举类型的值，枚举值包含三个：ACCEPT、DENY和NEUTRAL。</p>
<ul>
<li><p>ACCEPT：时会跳过这一级别的其它过滤器,进入下个级别的过滤器；</p>
</li>
<li><p>DENY：时会直接终止事件的传递；</p>
</li>
<li><p>NEUTRAL：时会继续交给同级别的其它过滤器处理（若已经是同级别最后一个过滤器，那么将日志事件传递给下个级别）。</p>
</li>
</ul>

          <h4>
            <a name="_root-过滤位置" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            过滤位置
          </h4><p>可以在以下四个位置配置过滤器：</p>
<ul>
<li><p>上下文范围有效的过滤器直接在<Configuration>标签里配置，被这种过滤器拒绝的日志事件不再会向后传递。一旦日志事件被一个上下文范围有效的过滤器判定为ACCEPT时，其它上下文有效的过滤器将不会对日志事件进行过滤，日志事件将会继续呗Logger和Appender的过滤器过滤。</p>
</li>
<li><p>Logger过滤器配置在一个特定的Logger上面。这些过滤器会在上下文范围有效的过滤器之后发挥作用，被这些过滤器拒绝的日志事件将会被丢弃，也不管additivity的配置如何，不会将日志传递给父亲Logger。</p>
</li>
<li><p>Appender过滤器用于决定一个指定的Appender是否应该处理和发布日志事件。</p>
</li>
<li><p>Appender引用过滤器用于决定Logger是否应该将日志事件路由到一个Appender。</p>
</li>
</ul>

          <h3>
            <a name="_root-我常用的过滤器" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            我常用的过滤器
          </h3>
          <h4>
            <a name="_root-CompositeFilter" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            CompositeFilter
          </h4><p>组合过滤器，使用一个<code>Filters</code>元素组合多个Filter，这个元素没有其他参数。</p>
<pre><code class="language-xml">&lt;Filters&gt;
  &lt;MarkerFilter marker=&quot;EVENT&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;
    &lt;DynamicThresholdFilter key=&quot;loginId&quot; defaultThreshold=&quot;ERROR&quot;
                          onMatch=&quot;ACCEPT&quot; onMismatch=&quot;NEUTRAL&quot;&gt;
    &lt;KeyValuePair key=&quot;User1&quot; value=&quot;DEBUG&quot;/&gt;
  &lt;/DynamicThresholdFilter&gt;
&lt;/Filters&gt;</code></pre>

          <h4>
            <a name="_root-ThresholdFilter" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            ThresholdFilter
          </h4><p>根据输出的日志级别过滤日志</p>

          <h5>
            <a name="_root-Level" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Level
          </h5><pre><code class="language-js">FATAL &lt; ERROR &lt; WARN &lt; INFO &lt; DEBUG &lt; TRACE</code></pre>

          <h5>
            <a name="_root-Filter Rule" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Filter Rule
          </h5><pre><code class="language-js">if (输出日志级别 &lt;= 过滤器配置级别) return &#39;onMatch&#39;
else return &#39;onMismatch&#39;;</code></pre>

          <h5>
            <a name="_root-Parameter" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Parameter
          </h5><ul>
<li>level：string：需要匹配的日志级别</li>
<li>onMatch：string：指定匹配到的LogEvents的过滤策略</li>
<li>onMismatch：string：指定不匹配的LogEvents的过滤策略</li>
</ul>
<p>比如，如果ThresholdFilter配置的级别为ERROR，日志事件级别为DEBUG，那么onMismatch值就会返回。只有ERROR或级别更低的FATAL级别到日志事件的到来，才会返回onMatch。</p>
<pre><code class="language-xml">&lt;File name=&quot;infoFile&quot; fileName=&quot;logs/info/info.log&quot;&gt;
    &lt;Filters&gt;
        &lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;
        &lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;
    &lt;/Filters&gt;
    &lt;PatternLayout&gt;
        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;
    &lt;/PatternLayout&gt;
&lt;/File&gt;</code></pre>
<p>上面这个例子就把仅为INFO级别的日志信息输出到特定的地方</p>
<p>我们看第一个过滤器：</p>
<pre><code class="language-xml">&lt;ThresholdFilter level=&quot;warn&quot; onMatch=&quot;DENY&quot; onMismatch=&quot;NEUTRAL&quot;/&gt;</code></pre>
<p>warn即warn以下（fatal、error）的级别被拒绝了，warn以上的级别被传递到下一个过滤器；</p>
<p>第二个过滤器：</p>
<pre><code class="language-xml">&lt;ThresholdFilter level=&quot;info&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;</code></pre>
<p>info即info以下（warn、fatal、error）的级别被接受了，info以上的级别被拒绝；</p>

          <h4>
            <a name="_root-RegexFilter" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            RegexFilter
          </h4><p>根据日志内容来使用正则表达式去过滤日志信息</p>

          <h5>
            <a name="_root-Parameter" class="reference-link" target="_blank">
              <span class="header-link"></span>
            </a>
            Parameter
          </h5><ul>
<li>regex：stirng：正则表达式</li>
<li>onMatch：string：指定匹配到的LogEvents的过滤策略</li>
<li>onMismatch：string：指定不匹配的LogEvents的过滤策略</li>
</ul>
<pre><code class="language-xml">&lt;RegexFilter regex=&quot;.* test .*&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;</code></pre>
<p>上面这个例子只使出含有test字样的日志。</p>

    </div>
    <div id="scriptsearcher" class="myhide input-group new_font">
        <input id="searchtext" type="text" class="form-control" placeholder="keywords" autocomplete="off">
        <div class="input-group-append">
            <button id="searchbut" class="btn btn-dark" type="button">Search</button>
        </div>
    </div>

    <div id="bbt" class="myhide new_font">
        <a id="toc" style="display: none;" class="myhide" href="javascript:void(0);" data-toggle="tooltip" data-placement="left" title="show/hide Toc">Toc</a>
        <a id="gohub" href="#" target="_blank" data-toggle="tooltip" data-placement="bottom" title="view this at github">unuse</a>
    </div>

    <div id="share_png_panel" class="myhide">
        <div id="share_curtain"></div>
        <div id="png_box"></div>
        <button id="share_png_paned_close" class="btn btn-dark">Close</button>
    </div>

    <script>
        importJsAfterLoad()
    </script>
</body>

</html>